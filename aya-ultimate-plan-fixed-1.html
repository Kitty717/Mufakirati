<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="manifest" id="manifest-link">
<script>
// Inline manifest as blob so app works standalone without server
const manifestData = {
  "name": "Ù…ÙÙƒØ±Ø© Ø±Ù…Ø¶Ø§Ù† - Aya",
  "short_name": "Aya Ø±Ù…Ø¶Ø§Ù†",
  "description": "Ù…ÙÙƒØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ø±Ù…Ø¶Ø§Ù†",
  "start_url": "./",
  "display": "standalone",
  "orientation": "portrait",
  "background_color": "#FFF5FB",
  "theme_color": "#E91E8C",
  "lang": "ar",
  "dir": "rtl",
  "icons": [
    {"src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' rx='40' fill='%23E91E8C'/%3E%3Ctext x='96' y='130' font-size='100' text-anchor='middle'%3EğŸŒ™%3C/text%3E%3C/svg%3E", "sizes": "192x192", "type": "image/svg+xml"},
    {"src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='100' fill='%23E91E8C'/%3E%3Ctext x='256' y='340' font-size='280' text-anchor='middle'%3EğŸŒ™%3C/text%3E%3C/svg%3E", "sizes": "512x512", "type": "image/svg+xml"}
  ]
};
const manifestBlob = new Blob([JSON.stringify(manifestData)], {type:'application/json'});
const manifestURL = URL.createObjectURL(manifestBlob);
document.getElementById('manifest-link').setAttribute('href', manifestURL);
</script>
<title>Ù…ÙÙƒØ±Ø© Ø±Ù…Ø¶Ø§Ù† - Aya</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --pink:#E91E8C;--pink-l:#F06AB4;--pink-p:#FFF0F8;
  --green:#00B894;--gold:#F9A825;--blue:#0984e3;
  --dark:#1a0a2e;--bg:#FFF5FB;--card:#fff;
  --text:#2d1b3d;--text-l:#7a5a8a;--border:#F5D0E8;
  --nav-h:65px;
  --extra-bottom:60px;
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;font-family:'Tajawal',sans-serif;background:var(--bg);color:var(--text);overflow:hidden}
#app{height:100vh;display:flex;flex-direction:column;overflow:hidden}
.pc{flex:1;overflow-y:auto;overflow-x:hidden;padding-bottom:calc(var(--nav-h) + var(--extra-bottom) + env(safe-area-inset-bottom,0px));-webkit-overflow-scrolling:touch}
.page{display:none;animation:fu .28s ease}.page.active{display:block}
@keyframes fu{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* TOP BAR */
.top-bar{background:linear-gradient(135deg,var(--pink),#9b1080);color:#fff;padding:14px 18px 11px;text-align:center;box-shadow:0 3px 15px rgba(233,30,140,.3)}
.top-bar h1{font-size:1.15rem;font-weight:700}
.top-bar .dt{font-size:.73rem;opacity:.85;margin-top:2px;font-weight:300}

/* BOTTOM NAV - FIXED */
.bnav{
  position:fixed;bottom:0;left:0;right:0;
  height:calc(var(--nav-h) + env(safe-area-inset-bottom,0px));
  background:#fff;
  border-top:2px solid var(--border);
  display:flex;align-items:stretch;
  z-index:200;
  box-shadow:0 -3px 15px rgba(0,0,0,.1);
}
.nb{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:3px;cursor:pointer;padding:8px 2px;background:none;border:none;
  color:var(--text-l);transition:color .2s;min-width:0;
}
.nb svg{width:22px;height:22px;flex-shrink:0;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.nb .nl{font-family:'Tajawal',sans-serif;font-size:.6rem;font-weight:600;white-space:nowrap}
.nb.active{color:var(--pink)}

/* CARDS */
.card{background:var(--card);border-radius:18px;padding:15px;margin:8px 13px;box-shadow:0 2px 12px rgba(0,0,0,.06);border:1px solid var(--border)}
.ct{font-size:.97rem;font-weight:700;color:var(--pink);margin-bottom:11px;display:flex;align-items:center;gap:7px}

/* HERO */
.hero{margin:8px 13px;background:linear-gradient(135deg,var(--pink),#9b1080);border-radius:22px;padding:18px 16px;color:#fff;position:relative;overflow:hidden;box-shadow:0 8px 26px rgba(233,30,140,.35)}
.hero::before{content:'ğŸŒ™';position:absolute;font-size:5rem;right:-8px;top:-8px;opacity:.12}
.hero h2{font-size:1.2rem;font-weight:900}
.hero p{font-size:.82rem;opacity:.9;margin-top:4px;font-weight:300}

/* COUNTDOWN */
.cdpill{margin:0 13px 8px;background:linear-gradient(135deg,#1a0a2e,#2d1060);border-radius:16px;padding:13px 16px;display:flex;align-items:center;gap:12px;color:#fff}
.cdpill .cdn{font-size:2rem;font-weight:900;color:var(--gold);flex-shrink:0}
.cdpill .cdt{font-size:.82rem;opacity:.9;line-height:1.5}
.cdpill .cdtitle{font-weight:700;font-size:.9rem}

/* STATS */
.srow{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin:8px 13px}
.sbox{background:#fff;border-radius:14px;padding:11px 7px;text-align:center;box-shadow:0 2px 9px rgba(0,0,0,.06);border:1px solid var(--border)}
.sbox .sn{font-size:1.3rem;font-weight:900;color:var(--pink);display:block}
.sbox .sl{font-size:.63rem;color:var(--text-l);margin-top:1px}

/* CHECK ROWS */
.cr{display:flex;align-items:center;gap:11px;padding:10px 0;border-bottom:1px solid #f5f0f8;cursor:pointer;user-select:none}
.cr:last-child{border-bottom:none}
.cc{width:25px;height:25px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;font-size:.78rem;font-weight:700}
.cc.done{background:var(--green);border-color:var(--green);color:#fff}
.cr .crl{font-size:.87rem;font-weight:500;flex:1}
.cr .del-task{background:none;border:none;color:#ddd;font-size:1rem;cursor:pointer;padding:0 4px;line-height:1}
.cr .del-task:active{color:#e74c3c}
.pb-w{background:#f0e6f8;border-radius:20px;height:7px;margin-top:11px;overflow:hidden}
.pb-f{height:100%;border-radius:20px;background:linear-gradient(90deg,var(--pink-l),var(--pink));transition:width .4s ease}

/* ADD CUSTOM TASK */
.add-task-row{display:flex;gap:7px;margin-top:12px;padding-top:11px;border-top:1px dashed var(--border)}
.add-task-input{flex:1;border:1.5px solid var(--border);border-radius:11px;padding:9px 12px;font-family:'Tajawal',sans-serif;font-size:.87rem;color:var(--text);background:#fffbfe;outline:none}
.add-task-input:focus{border-color:var(--pink)}
.add-task-btn{padding:9px 14px;background:var(--pink);color:#fff;border:none;border-radius:11px;font-family:'Tajawal',sans-serif;font-size:.85rem;font-weight:700;cursor:pointer;flex-shrink:0}

/* PROGRESS BAR */
.motiv{margin:0 13px 8px;background:linear-gradient(135deg,#fff0fb,#ffe6f5);border-radius:15px;padding:13px;text-align:center;border:1px solid #ffd6ef}
.motiv .mq{font-size:.9rem;color:var(--pink);font-weight:700}
.motiv .ms{font-size:.76rem;color:var(--text-l);margin-top:3px}

/* TABS */
.tabs{display:flex;gap:7px;margin:8px 13px 0;overflow-x:auto;scrollbar-width:none;padding-bottom:1px}
.tabs::-webkit-scrollbar{display:none}
.tab{flex-shrink:0;padding:7px 14px;border-radius:18px;background:#fff;border:2px solid var(--border);font-family:'Tajawal',sans-serif;font-size:.8rem;font-weight:600;cursor:pointer;color:var(--text-l);transition:all .2s}
.tab.active{background:var(--pink);border-color:var(--pink);color:#fff}
.tsec{display:none}.tsec.active{display:block}

/* MEAL CARDS */
.mhead{margin:8px 13px 0;background:linear-gradient(135deg,var(--pink),#b5179e);border-radius:17px;padding:13px 15px;color:#fff;display:flex;justify-content:space-between;align-items:center}
.mhead h3{font-size:.92rem;font-weight:700}
.cbadge{background:rgba(255,255,255,.25);padding:4px 11px;border-radius:18px;font-size:.76rem;font-weight:600}
.ocard{background:#fff;border-radius:15px;padding:13px;border:1.5px solid var(--border);margin:7px 13px 0}
.ot{font-size:.9rem;font-weight:700;margin-bottom:7px}
.oi{font-size:.8rem;color:var(--text-l);line-height:1.9}
.ctag{display:inline-block;background:#e8f8f2;color:var(--green);font-size:.75rem;font-weight:700;padding:3px 10px;border-radius:9px;margin-top:7px}
.tpill{margin:7px 13px 0;background:#fffbec;border:1px solid #ffe082;border-radius:12px;padding:10px 13px;font-size:.8rem;color:#7a5800;line-height:1.6}

/* EXERCISES */
.excard{margin:7px 13px 0;background:#fff;border-radius:17px;border:1.5px solid var(--border);overflow:hidden}
.exh{display:flex;align-items:center;padding:12px 13px;gap:10px;cursor:pointer}
.exn{width:30px;height:30px;background:var(--pink);color:#fff;border-radius:9px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:.8rem;flex-shrink:0}
.exi{flex:1}.exname{font-weight:700;font-size:.9rem}.exreps{font-size:.74rem;color:var(--text-l);margin-top:1px}
.exarrow{font-size:.95rem;color:var(--text-l);transition:transform .2s}
.excard.open .exarrow{transform:rotate(180deg)}
.exbody{display:none;padding:0 13px 13px;border-top:1px solid var(--border)}
.excard.open .exbody{display:block}
.exben{background:var(--pink-p);border-radius:9px;padding:9px 11px;font-size:.78rem;color:var(--pink);margin-top:10px;font-weight:500}
.vlink{display:inline-flex;align-items:center;gap:5px;background:#ff0000;color:#fff;padding:6px 13px;border-radius:18px;font-size:.76rem;font-weight:600;text-decoration:none;margin-top:8px}

/* FOOD SEARCH */
.ai-food-box{background:linear-gradient(135deg,#f0f0ff,#e8e0ff);border:1.5px solid #c9b8ff;border-radius:16px;padding:14px;margin-top:10px}
.qcat-btn{padding:5px 11px;background:#fff;border:1.5px solid #c9b8ff;border-radius:20px;font-family:'Tajawal',sans-serif;font-size:.75rem;font-weight:700;color:#5b21b6;cursor:pointer;white-space:nowrap}
.qcat-btn.active,.qcat-btn:active{background:#7c3aed;color:#fff;border-color:#7c3aed}
.food-db-item{display:flex;justify-content:space-between;align-items:center;padding:9px 12px;border-bottom:1px solid #f0ebff;cursor:pointer;font-size:.83rem}
.food-db-item:last-child{border-bottom:none}
.food-db-item:hover,.food-db-item:active{background:#f5f0ff}
.food-db-item .fdi-name{font-weight:600;color:var(--text)}
.food-db-item .fdi-cal{font-weight:700;color:#7c3aed;font-size:.8rem}
.ai-textarea{width:100%;min-height:80px;border:1.5px solid #c9b8ff;border-radius:12px;padding:10px 12px;font-family:'Tajawal',sans-serif;font-size:.87rem;color:var(--text);resize:none;background:#fff;outline:none;transition:border-color .2s}
.ai-textarea:focus{border-color:#7c3aed}
.ai-btn{width:100%;margin-top:9px;padding:11px;background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;border:none;border-radius:12px;font-family:'Tajawal',sans-serif;font-size:.92rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px}
.ai-btn:active{opacity:.9}
.ai-btn.loading::after{content:'';width:16px;height:16px;border:2px solid rgba(255,255,255,.5);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;margin-right:6px}
@keyframes spin{to{transform:rotate(360deg)}}
.ai-result{margin-top:10px;background:#fff;border-radius:12px;padding:12px;border:1px solid #c9b8ff;display:none}
.ai-result.show{display:block}
.ai-result .ai-total{font-size:1.1rem;font-weight:900;color:#7c3aed;text-align:center;margin-bottom:8px}
.ai-result-item{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid #f0ebff;font-size:.82rem}
.ai-result-item:last-child{border-bottom:none}
.ai-result-item .ain{color:var(--text)}
.ai-result-item .aic{font-weight:700;color:#7c3aed}
.add-ai-btn{width:100%;margin-top:9px;padding:9px;background:var(--green);color:#fff;border:none;border-radius:11px;font-family:'Tajawal',sans-serif;font-size:.88rem;font-weight:700;cursor:pointer}

/* MANUAL FOOD LOG */
.food-log-list{display:flex;flex-direction:column;gap:6px;margin-top:10px}
.food-log-item{display:flex;align-items:center;justify-content:space-between;background:#fff;border-radius:11px;padding:9px 12px;border:1px solid var(--border)}
.fli-name{font-size:.84rem;font-weight:500;flex:1}
.fli-cal{font-size:.82rem;font-weight:700;color:var(--green);margin:0 8px}
.fli-del{background:none;border:none;color:#ddd;font-size:1rem;cursor:pointer;padding:0 2px}
.fli-del:active{color:#e74c3c}
.cal-total-bar{background:linear-gradient(135deg,var(--pink),#9b1080);border-radius:14px;padding:13px 15px;margin-top:12px;color:#fff;display:flex;justify-content:space-between;align-items:center}
.ctb-label{font-size:.82rem;opacity:.9}
.ctb-goal{font-size:.74rem;opacity:.8;margin-top:2px}
.ctb-num{font-size:1.4rem;font-weight:900}

/* WATER */
.wgrid{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;margin-top:11px}
.wcup{aspect-ratio:1;border-radius:9px;background:#e8f4ff;border:2px solid #b3d9ff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.95rem;position:relative;overflow:hidden;transition:all .25s}
.wcup::before{content:'';position:absolute;bottom:0;left:0;right:0;height:0;background:linear-gradient(to top,#0984e3,#74b9ff);transition:height .3s ease}
.wcup.filled::before{height:100%}
.wcup .ci{position:relative;z-index:1}

/* NOTES */
.notes-area{width:100%;min-height:80px;border:1.5px solid var(--border);border-radius:12px;padding:10px;font-family:'Tajawal',sans-serif;font-size:.85rem;color:var(--text);resize:none;background:#fffbfe;margin-top:9px;outline:none}
.notes-area:focus{border-color:var(--pink)}
.save-btn{width:100%;padding:12px;background:linear-gradient(135deg,var(--pink),#9b1080);color:#fff;border:none;border-radius:14px;font-family:'Tajawal',sans-serif;font-size:.95rem;font-weight:700;cursor:pointer;margin-top:10px;box-shadow:0 4px 13px rgba(233,30,140,.3);transition:transform .15s}
.save-btn:active{transform:scale(.97)}
.wrow{display:flex;align-items:center;gap:9px;margin-top:9px}
.winput{flex:1;border:1.5px solid var(--border);border-radius:11px;padding:9px 12px;font-family:'Tajawal',sans-serif;font-size:.95rem;color:var(--text);background:#fffbfe;outline:none}
.winput:focus{border-color:var(--pink)}

/* PROGRESS */
.calc-row{display:flex;align-items:center;gap:9px;margin-bottom:10px}
.calc-label{font-size:.84rem;font-weight:600;color:var(--text-l);min-width:70px;flex-shrink:0}
.calc-input{flex:1;border:1.5px solid var(--border);border-radius:11px;padding:9px 12px;font-family:'Tajawal',sans-serif;font-size:.9rem;color:var(--text);background:#fffbfe;outline:none}
.calc-input:focus{border-color:var(--pink)}
select.calc-input{appearance:none;cursor:pointer}
.calc-btn{width:100%;padding:11px;background:linear-gradient(135deg,var(--pink),#9b1080);color:#fff;border:none;border-radius:14px;font-family:'Tajawal',sans-serif;font-size:.96rem;font-weight:700;cursor:pointer;margin-top:4px;box-shadow:0 4px 13px rgba(233,30,140,.3)}
.result-box{background:var(--pink-p);border:1.5px solid #ffc2e3;border-radius:14px;padding:14px;margin-top:12px;display:none}
.result-box.show{display:block}
.rbrow{display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid #ffd6ef}
.rbrow:last-child{border-bottom:none}
.rbrow span{font-size:.83rem;color:var(--text-l)}
.rbrow strong{font-size:.92rem;color:var(--pink);font-weight:900}

/* MEASUREMENTS */
.meas-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin-top:11px}
.meas-box{background:var(--pink-p);border-radius:13px;padding:12px;border:1px solid #ffd6ef}
.meas-box label{font-size:.76rem;color:var(--text-l);font-weight:600;display:block;margin-bottom:5px}
.meas-input{width:100%;border:1.5px solid var(--border);border-radius:9px;padding:8px 10px;font-family:'Tajawal',sans-serif;font-size:.9rem;color:var(--text);background:#fff;outline:none}
.meas-input:focus{border-color:var(--pink)}
.mh-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:.8rem}
.mh-date{color:var(--text-l)}
.mh-vals{display:flex;gap:12px;flex-wrap:wrap}
.mh-val{color:var(--pink);font-weight:700}

/* WEIGHT CHART */
.chart-wrap{background:#fff;border-radius:14px;padding:13px;margin-top:11px;border:1px solid var(--border)}
.chart-empty{text-align:center;padding:30px;color:var(--text-l);font-size:.85rem}

/* LOG */
.log-empty{text-align:center;padding:40px 20px;color:var(--text-l)}
.log-empty .icon{font-size:2.8rem;margin-bottom:9px}
.le{margin:7px 13px 0;background:#fff;border-radius:17px;border:1.5px solid var(--border);overflow:hidden}
.ledb{background:var(--pink-p);padding:9px 13px;display:flex;justify-content:space-between;align-items:center}
.led{font-weight:700;font-size:.86rem;color:var(--pink)}
.lesp{background:var(--pink);color:#fff;padding:3px 9px;border-radius:18px;font-size:.72rem;font-weight:700}
.lec{padding:11px 13px;font-size:.8rem;line-height:1.9}
.lch{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:6px}
.lt{padding:3px 9px;border-radius:9px;font-size:.72rem;font-weight:600}
.lt.done{background:#e8f8f2;color:var(--green)}.lt.skip{background:#ffeaea;color:#e74c3c}
.lnote{color:var(--text-l);font-style:italic;margin-top:3px}
.lwt{color:var(--pink);font-weight:700;margin-top:2px}

/* TIPS */
.tcard{margin:7px 13px 0;border-radius:16px;padding:14px;border:1.5px solid}
.tcard h3{font-size:.9rem;font-weight:700;margin-bottom:8px}
.tcard ul{list-style:none;font-size:.8rem;line-height:2}
.tcard.pink{background:var(--pink-p);border-color:#ffc2e3}.tcard.pink h3{color:var(--pink)}
.tcard.green{background:#edfbf5;border-color:#a8edce}.tcard.green h3{color:var(--green)}
.tcard.gold{background:#fffbec;border-color:#ffe082}.tcard.gold h3{color:#c77700}
.tcard.blue{background:#eef4ff;border-color:#b3ccff}.tcard.blue h3{color:#0055cc}
.tl{margin:8px 13px;background:linear-gradient(135deg,var(--pink),#9b1080);border-radius:19px;padding:15px;color:#fff}
.tl h3{font-size:.9rem;font-weight:700;margin-bottom:11px}
.tli{display:flex;align-items:flex-start;gap:10px;margin-bottom:10px}
.tldot{width:25px;height:25px;background:rgba(255,255,255,.25);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.72rem;font-weight:900;flex-shrink:0}
.tltext{font-size:.8rem;opacity:.95;line-height:1.5}
.wplan{display:grid;grid-template-columns:1fr 1fr 1fr;gap:7px;margin:7px 13px}
.wbox{background:#fff;border-radius:12px;padding:10px 7px;text-align:center;border:1.5px solid var(--border);font-size:.75rem;line-height:1.6}
.wbox .wk{font-weight:900;color:var(--pink);font-size:.8rem;display:block;margin-bottom:2px}

.slbl{font-size:.69rem;font-weight:700;color:var(--text-l);letter-spacing:1px;text-transform:uppercase;margin:13px 13px 4px}

.toast{position:fixed;bottom:calc(var(--nav-h) + 12px);left:50%;transform:translateX(-50%) translateY(20px);background:var(--dark);color:#fff;padding:9px 17px;border-radius:18px;font-size:.81rem;font-weight:500;z-index:999;opacity:0;transition:all .3s;white-space:nowrap;pointer-events:none;max-width:90vw;text-align:center}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
</style>
</head>
<body>
<div id="app">
  <div class="top-bar">
    <h1>ğŸŒ™ Ù…ÙÙƒØ±Ø© Ø±Ù…Ø¶Ø§Ù† - Aya</h1>
    <div class="dt" id="todayDate"></div>
  </div>

  <div class="pc">

    <!-- â•â•â•â• HOME â•â•â•â• -->
    <div class="page active" id="page-home">
      <div class="hero">
        <h2>Ø£Ù‡Ù„Ø§Ù‹ Aya! ğŸ’–</h2>
        <p>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ÙˆÙ…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ. Ø£Ù†ØªÙ ØªØ³ØªØ·ÙŠØ¹ÙŠÙ† ØªØ­Ù‚ÙŠÙ‚ Ù‡Ø¯ÙÙƒ!</p>
        <div style="margin-top:11px;display:flex;gap:7px;flex-wrap:wrap">
          <div style="background:rgba(255,255,255,.2);padding:5px 10px;border-radius:10px;font-size:.76rem">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù: 48-50 ÙƒØº</div>
          <div style="background:rgba(255,255,255,.2);padding:5px 10px;border-radius:10px;font-size:.76rem">ğŸ“‰ 1300-1400 Ø³Ø¹Ø±Ø©</div>
        </div>
      </div>
      <div class="cdpill" id="ramadanCountdown">
        <div class="cdn" id="cdNum">--</div>
        <div class="cdt"><div class="cdtitle">ÙŠÙˆÙ…Ø§Ù‹ Ù…ØªØ¨Ù‚ÙŠØ§Ù‹ ÙÙŠ Ø±Ù…Ø¶Ø§Ù† ğŸŒ™</div><div style="font-size:.74rem;opacity:.8;margin-top:2px">Ø§Ø³ØªÙ…Ø±ÙŠØŒ Ø£Ù†ØªÙ Ø±Ø§Ø¦Ø¹Ø©!</div></div>
      </div>
      <div class="srow">
        <div class="sbox"><span class="sn" id="hw">-</span><span class="sl">ÙƒØº Ø§Ù„ÙŠÙˆÙ…</span></div>
        <div class="sbox"><span class="sn" id="hwc">0</span><span class="sl">Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡</span></div>
        <div class="sbox"><span class="sn" id="hdc">0/4</span><span class="sl">Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</span></div>
      </div>
      <div class="slbl">Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</div>
      <div class="card">
        <!-- Fixed tasks -->
        <div class="cr" onclick="tc('workout')"><div class="cc" id="c-workout"></div><span>ğŸ’ª</span><span class="crl">ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ… (15-20 Ø¯Ù‚ÙŠÙ‚Ø©)</span></div>
        <div class="cr" onclick="tc('diet')"><div class="cc" id="c-diet"></div><span>ğŸ½ï¸</span><span class="crl">Ø§Ù„ØªØ²Ù…Øª Ø¨Ø®Ø·Ø© Ø§Ù„Ø£ÙƒÙ„</span></div>
        <div class="cr" onclick="tc('water')"><div class="cc" id="c-water"></div><span>ğŸ’§</span><span class="crl">Ø´Ø±Ø¨Øª 8-10 Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡</span></div>
        <div class="cr" onclick="tc('sleep')"><div class="cc" id="c-sleep"></div><span>ğŸ˜´</span><span class="crl">Ù†Ù…Øª 7-8 Ø³Ø§Ø¹Ø§Øª</span></div>
        <!-- Custom tasks rendered here -->
        <div id="customTasksHome"></div>
        <div class="pb-w"><div class="pb-f" id="pbf" style="width:0%"></div></div>
      </div>
      <div class="slbl">ØªØ­ÙÙŠØ²Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
      <div class="motiv">
        <div class="mq" id="mq">ğŸŒŸ Ø£Ù†ØªÙ Ø£Ù‚ÙˆÙ‰ Ù…Ù…Ø§ ØªØªØ®ÙŠÙ„ÙŠÙ† ğŸŒŸ</div>
        <div class="ms">ÙƒÙ„ ØªÙ…Ø±ÙŠÙ† ØªÙƒÙ…Ù„ÙŠÙ†Ù‡ Ù‡Ùˆ Ø®Ø·ÙˆØ© Ù†Ø­Ùˆ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£ÙØ¶Ù„ Ù…Ù†ÙƒÙ!</div>
      </div>
      <div style="height:6px"></div>
    </div>

    <!-- â•â•â•â• MEALS â•â•â•â• -->
    <div class="page" id="page-meals">
      <div class="tabs">
        <button class="tab active" onclick="stab('meals','iftar',this)">ğŸŒ™ Ø§Ù„Ø¥ÙØ·Ø§Ø±</button>
        <button class="tab" onclick="stab('meals','tarawih',this)">ğŸŒƒ Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­</button>
        <button class="tab" onclick="stab('meals','suhoor',this)">ğŸŒ… Ø§Ù„Ø³Ø­ÙˆØ±</button>
        <button class="tab" onclick="stab('meals','cals',this)">ğŸ”¥ Ø§Ù„Ø³Ø¹Ø±Ø§Øª</button>
      </div>
      <div class="tsec active" id="meals-iftar">
        <div class="mhead"><h3>ğŸŒ™ Ø§Ù„Ø¥ÙØ·Ø§Ø±</h3><div class="cbadge">400-450 Ø³Ø¹Ø±Ø©</div></div>
        <div class="tpill">ğŸ’¡ <strong>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙƒÙŠ:</strong> ØªÙ…Ø±Ø© + Ù…Ø§ÙŠ â† 5 Ø¯Ù‚Ø§Ø¦Ù‚ â† Ø´ÙˆØ±Ø¨Ø© â† Ø³Ù„Ø·Ø© â† Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</div>
        <div class="ocard"><div class="ot">ğŸ¥£ Ø´ÙˆØ±Ø¨Ø© Ø®Ø¶Ø§Ø±</div><div class="oi">â€¢ 1.5-2 ÙƒØ§Ø³Ø©&nbsp;â€¢ Ø´Ø¹ÙŠØ±ÙŠØ© Ù‚Ù„ÙŠÙ„Ø©&nbsp;â€¢ Ø³Ù…Ù†Ø© Ø®ÙÙŠÙØ©&nbsp;â€¢ Ø®Ø¶Ø§Ø± Ù…ØªÙ†ÙˆØ¹Ø©</div><span class="ctag">~80 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ¥— Ø³Ù„Ø·Ø© ÙƒØ¨ÙŠØ±Ø©</div><div class="oi">â€¢ Ø®Ø³ + Ø®ÙŠØ§Ø± + Ø¨Ù†Ø¯ÙˆØ±Ø© + Ø¬Ø²Ø± + ÙÙ„ÙŠÙÙ„Ø©<br>â€¢ ØµÙˆØµ: Ø®Ù„ + Ù„ÙŠÙ…ÙˆÙ† + Â½ Ù….Øµ Ø²ÙŠØª Ø²ÙŠØªÙˆÙ†</div><span class="ctag">~50 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ½ï¸ Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</div><div class="oi">â€¢ ÙØªØ© Ø­Ù…Øµ 6-8 Ù…Ø¹Ø§Ù„Ù‚ØŒ Ø®ÙÙÙŠ Ø§Ù„Ø®Ø¨Ø² Ø§Ù„Ù…Ù‚Ù„ÙŠ<br>â€¢ Ø£Ùˆ Ø¨Ø¯ÙŠÙ„: Ø±Ø² + Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ</div><span class="ctag">~270 Ø³Ø¹Ø±Ø©</span></div>
        <div class="tpill">âœ¨ ÙƒÙ„ÙŠ Ø¨Ø¨Ø·Ø¡ ÙˆÙ…Ø¶ØºÙŠ ÙƒÙˆÙŠØ³. Ø®Ù„ÙŠ 20 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨ÙŠÙ† ÙƒÙ„ ØµØ­Ù†!</div>
      </div>
      <div class="tsec" id="meals-tarawih">
        <div class="mhead"><h3>ğŸŒƒ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­</h3><div class="cbadge">150-200 Ø³Ø¹Ø±Ø©</div></div>
        <div class="ocard"><div class="ot">ğŸ Ø®ÙŠØ§Ø± 1: ÙÙˆØ§ÙƒÙ‡</div><div class="oi">â€¢ ØªÙØ§Ø­Ø© ÙˆØ³Ø· Ø£Ùˆ ÙƒØ£Ø³ ÙØ±Ø§ÙˆÙ„Ø© Ø£Ùˆ Ø¨Ø±ØªÙ‚Ø§Ù„Ø©<br>â€¢ Ù…Ø¹ Ø¹Ù„Ø¨Ø© Ø²Ø¨Ø§Ø¯ÙŠ Ø®ÙÙŠÙ</div><span class="ctag">~150 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ¥œ Ø®ÙŠØ§Ø± 2: Ù…ÙƒØ³Ø±Ø§Øª</div><div class="oi">â€¢ 10-12 Ø­Ø¨Ø© Ù„ÙˆØ² Ù†ÙŠØ¡ Ø£Ùˆ 6-8 Ø­Ø¨Ø§Øª Ø¬ÙˆØ²<br>â€¢ Ù…Ø¹ ØªÙØ§Ø­Ø© ØµØºÙŠØ±Ø© â€” Ø¨Ø¯ÙˆÙ† Ù…Ù„Ø­!</div><span class="ctag">~180 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ« Ø®ÙŠØ§Ø± 3: Ø­Ù„ÙˆÙŠØ§Øª ØµØ­ÙŠØ©</div><div class="oi">â€¢ 2 ØªÙ…Ø±Ø© Ù…Ø­Ø´ÙˆØ© Ù„ÙˆØ²<br>â€¢ Ø£Ùˆ Ù‚Ø·Ø¹Ø© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¯Ø§ÙƒÙ†Ø© + Ø´Ø§ÙŠ Ø£Ø®Ø¶Ø±</div><span class="ctag">~120 Ø³Ø¹Ø±Ø©</span></div>
      </div>
      <div class="tsec" id="meals-suhoor">
        <div class="mhead"><h3>ğŸŒ… Ø§Ù„Ø³Ø­ÙˆØ± (3:30 Øµ)</h3><div class="cbadge">400-450 Ø³Ø¹Ø±Ø©</div></div>
        <div class="ocard"><div class="ot">ğŸ¥š Ø®ÙŠØ§Ø± 1: Ø¨Ø±ÙˆØªÙŠÙ† Ø¹Ø§Ù„ÙŠ</div><div class="oi">â€¢ 2 Ø¨ÙŠØ¶Ø© Ù…Ø³Ù„ÙˆÙ‚Ø© + Â½ Ø±ØºÙŠÙ Ø®Ø¨Ø² Ø£Ø³Ù…Ø±<br>â€¢ Ø®Ø¶Ø§Ø± + Ù„Ø¨Ù†Ø© Ù‚Ù„ÙŠÙ„Ø© Ø§Ù„Ø¯Ø³Ù…</div><span class="ctag">~380 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ¥› Ø®ÙŠØ§Ø± 2: Ø²Ø¨Ø§Ø¯ÙŠ Ù…Ø´Ø¨Ø¹</div><div class="oi">â€¢ 2 Ø¹Ù„Ø¨Ø© Ø²Ø¨Ø§Ø¯ÙŠ ÙƒØ¨ÙŠØ±Ø© + 3 Ù…Ø¹Ø§Ù„Ù‚ Ø´ÙˆÙØ§Ù†<br>â€¢ Ù…Ø¹Ù„Ù‚Ø© Ø¹Ø³Ù„ + ÙÙˆØ§ÙƒÙ‡ Ù…Ø¬ÙÙØ©</div><span class="ctag">~400 Ø³Ø¹Ø±Ø©</span></div>
        <div class="ocard"><div class="ot">ğŸ§€ Ø®ÙŠØ§Ø± 3: Ø¬Ø¨Ù†Ø© ÙˆØ®Ø¶Ø§Ø±</div><div class="oi">â€¢ Ø¬Ø¨Ù†Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ù‚Ù„ÙŠÙ„Ø© Ø¯Ø³Ù… + Ù†Øµ Ø±ØºÙŠÙ Ø£Ø³Ù…Ø±<br>â€¢ Ø®Ø¶Ø§Ø± Ù…ØªÙ†ÙˆØ¹Ø© + 5-6 Ø­Ø¨Ø§Øª Ø²ÙŠØªÙˆÙ†</div><span class="ctag">~420 Ø³Ø¹Ø±Ø©</span></div>
        <div class="tpill">ğŸ’§ <strong>Ù…Ù‡Ù…:</strong> 2-3 ÙƒØ§Ø³Ø§Øª Ù…Ø§ÙŠ Ø¨Ø§Ù„Ø³Ø­ÙˆØ± + ØªØ¬Ù†Ø¨ÙŠ Ø§Ù„Ù…Ù„Ø­ ÙˆØ§Ù„Ø­Ù„ÙˆÙŠØ§Øª!</div>
      </div>
      <div class="tsec" id="meals-cals">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ”¥ Ø®Ø·Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
          <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:7px;text-align:center">
            <div style="background:var(--pink-p);border-radius:12px;padding:10px 5px"><div style="font-size:1.3rem;font-weight:900;color:var(--pink)">1300</div><div style="font-size:.67rem;color:var(--text-l);margin-top:1px">Ù‡Ø¯Ù Ø§Ù„Ø³Ø¹Ø±Ø§Øª</div></div>
            <div style="background:#edfbf5;border-radius:12px;padding:10px 5px"><div style="font-size:1.3rem;font-weight:900;color:var(--green)">300</div><div style="font-size:.67rem;color:var(--text-l);margin-top:1px">Ø§Ù„Ø¹Ø¬Ø² Ø§Ù„ÙŠÙˆÙ…ÙŠ</div></div>
            <div style="background:#fffbec;border-radius:12px;padding:10px 5px"><div style="font-size:1.3rem;font-weight:900;color:var(--gold)">0.5</div><div style="font-size:.67rem;color:var(--text-l);margin-top:1px">ÙƒØº/Ø£Ø³Ø¨ÙˆØ¹</div></div>
          </div>
          <div style="margin-top:11px;background:var(--pink-p);border-radius:12px;padding:11px;font-size:.8rem;line-height:2;color:var(--text)">âœ… Ø¹Ø¬Ø² Ø®ÙÙŠÙ = Ø¬Ø³Ù…Ùƒ Ù…Ø§ ÙŠØ¯Ø®Ù„ ÙˆØ¶Ø¹ "Ø§Ù„Ø¬ÙˆØ¹"<br>âœ… ÙŠÙ†Ø­ÙÙƒ ØªØ¯Ø±ÙŠØ¬ÙŠ Ø¨Ø¯ÙˆÙ† Ø®Ø³Ø§Ø±Ø© Ø¹Ø¶Ù„Ø§Øª<br>âŒ Ù„Ø§ ØªÙ†Ø²Ù„ÙŠ ØªØ­Øª 1200 Ø³Ø¹Ø±Ø© Ø£Ø¨Ø¯Ø§Ù‹!</div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â• EXERCISES â•â•â•â• -->
    <div class="page" id="page-exercises">
      <div class="card" style="margin-top:8px">
        <div class="ct">ğŸ’ª Ø±ÙˆØªÙŠÙ† Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
        <div style="font-size:.79rem;color:var(--text-l);line-height:1.9">â± Ø§Ù„Ù…Ø¯Ø©: 15-20 Ø¯Ù‚ÙŠÙ‚Ø© &nbsp;â€¢&nbsp; ğŸ“… 5-6 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹<br>ğŸ’¡ Ø£ÙØ¶Ù„ ÙˆÙ‚Øª: Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ù€ 30 Ø¯Ù‚ÙŠÙ‚Ø©</div>
      </div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">1</div><div class="exi"><div class="exname">ğŸ”¥ Ø³ÙƒÙˆØ§Øª Ø¶ÙŠÙ‚</div><div class="exreps">25 ØªÙƒØ±Ø§Ø± Ã— 3 Ø¬ÙˆÙ„Ø§Øª â€” Ø§Ø³ØªØ±Ø§Ø­Ø© 30 Ø«</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ ÙŠØ´Ø¯ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙØ®Ø° + Ø§Ù„Ù…Ø¤Ø®Ø±Ø© + Ø§Ù„Ø¨Ø·Ù† Ø§Ù„Ø³ÙÙ„ÙŠ</div><a href="https://www.youtube.com/results?search_query=narrow+squat+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">2</div><div class="exi"><div class="exname">ğŸ¯ Ù„Ø§Ù†Ø¬Ø² Ø®Ù„ÙÙŠ</div><div class="exreps">20 Ù„ÙƒÙ„ Ø±Ø¬Ù„ Ã— 3 Ø¬ÙˆÙ„Ø§Øª â€” Ø§Ø³ØªØ±Ø§Ø­Ø© 45 Ø«</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ ÙŠÙ†Ø­Ù Ø§Ù„Ø£ÙØ®Ø§Ø° ÙˆÙŠØµØºØ± Ø§Ù„Ù…Ø¤Ø®Ø±Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù„Ø­ÙˆØ¸</div><a href="https://www.youtube.com/results?search_query=reverse+lunge+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">3</div><div class="exi"><div class="exname">âš¡ Ø³ÙƒÙˆØ§Øª Ù†Ø¨Ø¶</div><div class="exreps">30 Ù†Ø¨Ø¶Ø© Ã— 3 Ø¬ÙˆÙ„Ø§Øª â€” Ø§Ø³ØªØ±Ø§Ø­Ø© 30 Ø«</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ ÙŠØ­Ø±Ù‚ Ø§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø³Ø±Ø¹Ø©!</div><a href="https://www.youtube.com/results?search_query=pulse+squat+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">4</div><div class="exi"><div class="exname">ğŸ¦µ Ø±ÙØ¹ Ø±Ø¬Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù†Ø¨</div><div class="exreps">25 Ù„ÙƒÙ„ Ø¬Ù‡Ø© Ã— 3 Ø¬ÙˆÙ„Ø§Øª</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ ÙŠØ¶Ø±Ø¨ Ø¯Ø§Ø®Ù„ ÙˆØ®Ø§Ø±Ø¬ Ø§Ù„ÙØ®Ø° + Ø§Ù„Ø£Ø±Ø¯Ø§Ù</div><a href="https://www.youtube.com/results?search_query=side+leg+raise+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">5</div><div class="exi"><div class="exname">ğŸ‘ Ø¬Ø³Ø± Ø§Ù„Ù…Ø¤Ø®Ø±Ø©</div><div class="exreps">20 Ã— 3 Ø¨Ø¨Ø·Ø¡ â€” Ø§Ø³ØªØ±Ø§Ø­Ø© 30 Ø«</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ Ù…Ø¤Ø®Ø±Ø© Ù…Ø´Ø¯ÙˆØ¯Ø© ÙˆÙ…Ø±ÙÙˆØ¹Ø© Ø¨Ø¯ÙˆÙ† ØªÙƒØ¨ÙŠØ±</div><a href="https://www.youtube.com/results?search_query=glute+bridge+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">6</div><div class="exi"><div class="exname">ğŸ’ Ø¨Ù„Ø§Ù†Ùƒ</div><div class="exreps">45 Ø«Ø§Ù†ÙŠØ© Ã— 3 Ø¬ÙˆÙ„Ø§Øª</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ ÙŠØ´Ø¯ Ø§Ù„Ø¨Ø·Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ ÙˆÙŠÙ…Ù†Ø¹ Ø§Ù„ÙƒØ±Ø´</div><a href="https://www.youtube.com/results?search_query=plank+exercise+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="excard" onclick="tex(this)"><div class="exh"><div class="exn">7</div><div class="exi"><div class="exname">ğŸŒŸ Ø¨Ù„Ø§Ù†Ùƒ ÙØªØ­/ØºÙ„Ù‚</div><div class="exreps">15 Ã— 3 Ø¬ÙˆÙ„Ø§Øª â€” Ø§Ø³ØªØ±Ø§Ø­Ø© 45 Ø«</div></div><div class="exarrow">â–¼</div></div><div class="exbody"><div class="exben">âœ¨ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙØ®Ø° + Ø£Ø³ÙÙ„ Ø§Ù„Ø¨Ø·Ù† + ÙƒØ§Ø±Ø¯ÙŠÙˆ</div><a href="https://www.youtube.com/results?search_query=plank+jacks+arabic" target="_blank" class="vlink">â–¶ Ø´Ø§Ù‡Ø¯ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a></div></div>
      <div class="slbl">ØªØ·ÙˆÙŠØ± Ø§Ù„ØªÙ…Ø±ÙŠÙ†</div>
      <div class="wplan">
        <div class="wbox"><span class="wk">Ø£Ø³Ø¨ÙˆØ¹ 1-2</span>Ù†ÙØ³ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…<br>Ø±ÙƒØ²ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
        <div class="wbox"><span class="wk">Ø£Ø³Ø¨ÙˆØ¹ 3-4</span>Ø²ÙŠØ¯ÙŠ 5 ØªÙƒØ±Ø§Ø±Ø§Øª<br>Ù„ÙƒÙ„ ØªÙ…Ø±ÙŠÙ†</div>
        <div class="wbox"><span class="wk">Ø£Ø³Ø¨ÙˆØ¹ 5+</span>Ø²ÙŠØ¯ÙŠ Ø¬ÙˆÙ„Ø© Ø£Ùˆ<br>Ø£ÙˆØ²Ø§Ù† Ø®ÙÙŠÙØ©</div>
      </div>
      <div style="height:6px"></div>
    </div>

    <!-- â•â•â•â• DAILY TRACKER â•â•â•â• -->
    <div class="page" id="page-tracker">
      <div class="tabs" style="margin-top:8px">
        <button class="tab active" onclick="stab('trk','checks',this)">âœ… Ù…Ù‡Ø§Ù…ÙŠ</button>
        <button class="tab" onclick="stab('trk','food',this)">ğŸ¤– Ù…Ø§ Ø£ÙƒÙ„Øª</button>
        <button class="tab" onclick="stab('trk','notes',this)">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙŠ</button>
      </div>

      <!-- CHECKS TAB -->
      <div class="tsec active" id="trk-checks">
        <div class="card" style="margin-top:8px">
          <div class="ct">âœ… Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="cr" onclick="tc('workout')"><div class="cc" id="c-workout2"></div><span>ğŸ’ª</span><span class="crl">ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…</span></div>
          <div class="cr" onclick="tc('diet')"><div class="cc" id="c-diet2"></div><span>ğŸ½ï¸</span><span class="crl">Ø§Ù„ØªØ²Ù…Øª Ø¨Ø®Ø·Ø© Ø§Ù„Ø£ÙƒÙ„</span></div>
          <div class="cr" onclick="tc('water')"><div class="cc" id="c-water2"></div><span>ğŸ’§</span><span class="crl">Ø´Ø±Ø¨Øª 8-10 Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡</span></div>
          <div class="cr" onclick="tc('sleep')"><div class="cc" id="c-sleep2"></div><span>ğŸ˜´</span><span class="crl">Ù†Ù…Øª 7-8 Ø³Ø§Ø¹Ø§Øª</span></div>
          <div id="customTasksTracker"></div>
          <!-- Add custom task -->
          <div class="add-task-row">
            <input class="add-task-input" id="newTaskInput" placeholder="Ø£Ø¶ÙŠÙÙŠ Ù…Ù‡Ù…Ø© Ø®Ø§ØµØ© Ø¨ÙƒÙ... Ù…Ø«Ù„Ø§Ù‹: Ù‚Ø±Ø£Øª Ù‚Ø±Ø¢Ù†ØŒ Ù…Ø´ÙŠØª 10 Ø¯Ù‚Ø§Ø¦Ù‚">
            <button class="add-task-btn" onclick="addCustomTask()">+</button>
          </div>
        </div>
        <div class="card" style="margin-top:0">
          <div class="ct">ğŸ’§ Ù…ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ø¡</div>
          <div style="font-size:.76rem;color:var(--text-l)">Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ ÙƒÙ„ ÙƒØ£Ø³ Ù„Ù…Ù„Ø¦Ù‡</div>
          <div class="wgrid" id="wgrid"></div>
          <div style="margin-top:8px;font-size:.81rem;color:var(--text-l);text-align:center" id="wcnt">0 / 8 Ø£ÙƒÙˆØ§Ø¨</div>
        </div>
        <div class="card" style="margin-top:0">
          <div class="ct">âš–ï¸ ÙˆØ²Ù† Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="wrow">
            <input type="number" class="winput" id="wgtInput" placeholder="Ù…Ø«Ø§Ù„: 52.5" step="0.1">
            <span style="font-size:.82rem;color:var(--text-l)">ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…</span>
          </div>
        </div>
        <button class="save-btn" style="margin:0 13px;width:calc(100% - 26px)" onclick="saveDay()">ğŸ’¾ Ø­ÙØ¸ ÙŠÙˆÙ…ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„</button>
      </div>

      <!-- FOOD SEARCH TAB -->
      <div class="tsec" id="trk-food">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ” Ø§Ø¨Ø­Ø«ÙŠ Ø¹Ù† Ø§Ù„Ø£ÙƒÙ„ ÙˆØ§Ø­Ø³Ø¨ÙŠ Ø§Ù„Ø³Ø¹Ø±Ø§Øª</div>
          <div style="font-size:.8rem;color:var(--text-l);margin-bottom:10px;line-height:1.7">Ø§Ø¨Ø­Ø«ÙŠ Ø¹Ù† Ø£ÙŠ Ø£ÙƒÙ„ ÙˆØ£Ø¶ÙŠÙÙŠÙ‡ Ø¨Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù„ÙŠ Ø£ÙƒÙ„ØªÙÙ‡Ø§!</div>

          <div class="ai-food-box">
            <!-- Search bar -->
            <div style="position:relative">
              <input type="text" id="foodSearchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø«ÙŠ Ø¹Ù† Ø£ÙƒÙ„... Ù…Ø«Ù„: Ø±Ø²ØŒ Ø¯Ø¬Ø§Ø¬ØŒ ØªÙ…Ø±"
                style="width:100%;padding:10px 12px;border:1.5px solid #c9b8ff;border-radius:12px;font-family:'Tajawal',sans-serif;font-size:.9rem;color:var(--text);background:#fff;outline:none;box-sizing:border-box;direction:rtl"
                oninput="searchFood(this.value)" autocomplete="off" />
              <div id="foodSuggestions" style="display:none;position:absolute;top:100%;right:0;left:0;background:#fff;border:1.5px solid #c9b8ff;border-top:none;border-radius:0 0 12px 12px;max-height:220px;overflow-y:auto;z-index:50;box-shadow:0 4px 15px rgba(0,0,0,.1)"></div>
            </div>

            <!-- Selected food + qty -->
            <div id="selectedFoodBox" style="display:none;margin-top:10px;background:#fff;border:1.5px solid #c9b8ff;border-radius:12px;padding:12px">
              <div id="selectedFoodName" style="font-weight:700;font-size:.9rem;color:var(--text);margin-bottom:4px"></div>
              <div id="selectedFoodBase" style="font-size:.75rem;color:var(--text-l);margin-bottom:10px"></div>
              <!-- Mode toggle -->
              <div style="display:flex;gap:7px;margin-bottom:10px">
                <button id="modeUnitBtn" onclick="setFoodMode('unit')" style="flex:1;padding:6px;background:#7c3aed;color:#fff;border:none;border-radius:9px;font-family:'Tajawal',sans-serif;font-size:.78rem;font-weight:700;cursor:pointer">Ø¨Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©</button>
                <button id="modeSpoonsBtn" onclick="setFoodMode('spoons')" style="flex:1;padding:6px;background:#f0ebff;color:#5b21b6;border:1.5px solid #c9b8ff;border-radius:9px;font-family:'Tajawal',sans-serif;font-size:.78rem;font-weight:700;cursor:pointer">ğŸ¥„ Ø¨Ø§Ù„Ù…Ø¹Ø§Ù„Ù‚</button>
              </div>
              <!-- Unit mode -->
              <div id="modeUnitRow" style="display:flex;align-items:center;gap:10px">
                <label style="font-size:.8rem;font-weight:600;color:#5b21b6;white-space:nowrap">Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
                <input type="number" id="foodQty" value="1" min="0.25" step="0.25"
                  style="width:70px;padding:6px 8px;border:1.5px solid #c9b8ff;border-radius:8px;font-family:'Tajawal',sans-serif;font-size:.9rem;text-align:center"
                  oninput="updateQtyCalc()" />
                <span id="foodUnit" style="font-size:.8rem;color:var(--text-l)"></span>
                <span id="qtyCalcResult" style="margin-right:auto;font-weight:900;font-size:1rem;color:#7c3aed"></span>
              </div>
              <!-- Spoons mode -->
              <div id="modeSpoonsRow" style="display:none">
                <div style="background:#f5f0ff;border-radius:9px;padding:9px 11px;margin-bottom:8px;font-size:.75rem;color:#5b21b6;line-height:1.6">ğŸ’¡ Ø§Ø®ØªØ§Ø±ÙŠ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ù‚ â€” Ø¨ÙŠØ­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!</div>
                <div style="display:flex;gap:7px;margin-bottom:8px">
                  <button id="spoonTypeLargeBtn" onclick="setSpoonType('large',this)" style="flex:1;padding:6px;background:#7c3aed;color:#fff;border:none;border-radius:9px;font-family:'Tajawal',sans-serif;font-size:.75rem;font-weight:700;cursor:pointer">Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø© (15Ù…Ù„)</button>
                  <button id="spoonTypeSmallBtn" onclick="setSpoonType('small',this)" style="flex:1;padding:6px;background:#f0ebff;color:#5b21b6;border:1.5px solid #c9b8ff;border-radius:9px;font-family:'Tajawal',sans-serif;font-size:.75rem;font-weight:700;cursor:pointer">Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø© (5Ù…Ù„)</button>
                </div>
                <div style="display:flex;align-items:center;gap:10px">
                  <label style="font-size:.8rem;font-weight:600;color:#5b21b6;white-space:nowrap">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ù‚:</label>
                  <input type="number" id="spoonQty" value="1" min="0.5" step="0.5"
                    style="width:70px;padding:6px 8px;border:1.5px solid #c9b8ff;border-radius:8px;font-family:'Tajawal',sans-serif;font-size:.9rem;text-align:center"
                    oninput="updateSpoonCalc()" />
                  <span id="spoonCalcResult" style="margin-right:auto;font-weight:900;font-size:1rem;color:#7c3aed">0 Ø³Ø¹Ø±Ø©</span>
                </div>
                <div id="spoonNote" style="font-size:.72rem;color:var(--text-l);margin-top:5px;text-align:center"></div>
              </div>
              <button onclick="addFoodFromDB()" style="margin-top:10px;width:100%;padding:9px;background:linear-gradient(135deg,var(--pink),#9b1080);color:#fff;border:none;border-radius:10px;font-family:'Tajawal',sans-serif;font-size:.88rem;font-weight:700;cursor:pointer">âœ… Ø£Ø¶ÙŠÙÙŠ Ù„Ù„Ø³Ø¬Ù„</button>
            </div>

            <!-- Quick Ramadan categories -->
            <div style="margin-top:12px">
              <div style="font-size:.78rem;font-weight:700;color:#5b21b6;margin-bottom:7px">âš¡ Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø´ÙŠÙˆØ¹Ø§Ù‹ ÙÙŠ Ø±Ù…Ø¶Ø§Ù†</div>
              <div style="display:flex;flex-wrap:wrap;gap:6px" id="quickCats">
                <button class="qcat-btn" onclick="filterCat('iftar')">ğŸŒ™ Ø¥ÙØ·Ø§Ø±</button>
                <button class="qcat-btn" onclick="filterCat('suhoor')">ğŸŒ… Ø³Ø­ÙˆØ±</button>
                <button class="qcat-btn" onclick="filterCat('soup')">ğŸ¥£ Ø´ÙˆØ±Ø¨Ø©</button>
                <button class="qcat-btn" onclick="filterCat('rice')">ğŸš Ø±Ø² ÙˆØ­Ø¨ÙˆØ¨</button>
                <button class="qcat-btn" onclick="filterCat('meat')">ğŸ— Ù„Ø­ÙˆÙ… ÙˆØ¯Ø¬Ø§Ø¬</button>
                <button class="qcat-btn" onclick="filterCat('bread')">ğŸ«“ Ø®Ø¨Ø²</button>
                <button class="qcat-btn" onclick="filterCat('sweets')">ğŸ¯ Ø­Ù„ÙˆÙŠØ§Øª</button>
                <button class="qcat-btn" onclick="filterCat('drinks')">ğŸ¥¤ Ù…Ø´Ø±ÙˆØ¨Ø§Øª</button>
                <button class="qcat-btn" onclick="filterCat('fruits')">ğŸ ÙÙˆØ§ÙƒÙ‡</button>
                <button class="qcat-btn" onclick="filterCat('dairy')">ğŸ¥› Ø£Ù„Ø¨Ø§Ù† ÙˆØ¨ÙŠØ¶</button>
              </div>
              <div id="catFoodList" style="display:none;margin-top:8px;max-height:200px;overflow-y:auto;background:#fff;border:1.5px solid #e0d4ff;border-radius:12px"></div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:0">
          <div class="ct">ğŸ“‹ ÙˆØ¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="food-log-list" id="foodLogList"></div>
          <div class="cal-total-bar">
            <div><div class="ctb-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¹Ø±Ø§Øª</div><div class="ctb-goal">Ø§Ù„Ù‡Ø¯Ù: 1300-1400 Ø³Ø¹Ø±Ø©</div></div>
            <div class="ctb-num"><span id="totalCal">0</span> Ø³Ø¹Ø±Ø©</div>
          </div>
        </div>
      </div>

      <!-- NOTES TAB -->
      <div class="tsec" id="trk-notes">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙŠ Ø§Ù„ÙŠÙˆÙ…</div>
          <div style="font-size:.77rem;color:var(--text-l)">ÙƒÙŠÙ ÙƒØ§Ù† ÙŠÙˆÙ…ÙƒØŸ ÙƒÙŠÙ Ø­Ø³ÙŠØªÙØŸ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø©!</div>
          <textarea class="notes-area" id="todayNotes" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§..."></textarea>
          <button class="save-btn" onclick="saveDay()">ğŸ’¾ Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„</button>
        </div>
      </div>
    </div>

    <!-- â•â•â•â• PROGRESS â•â•â•â• -->
    <div class="page" id="page-progress">
      <div class="tabs" style="margin-top:8px">
        <button class="tab active" onclick="stab('prog','chart',this)">ğŸ“ˆ Ø§Ù„ÙˆØ²Ù†</button>
        <button class="tab" onclick="stab('prog','meas',this)">ğŸ“ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</button>
        <button class="tab" onclick="stab('prog','calc',this)">ğŸ“ Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
      </div>

      <div class="tsec active" id="prog-chart">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ“ˆ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„ÙˆØ²Ù†</div>
          <div id="weightChartWrap"></div>
        </div>
        <div class="card" style="margin-top:0">
          <div class="ct">ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ‚Ø¯Ù…</div>
          <div id="weightSummary"><div style="color:var(--text-l);font-size:.82rem">Ø³Ø¬Ù„ÙŠ ÙˆØ²Ù†Ùƒ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªÙ‚Ø¯Ù… Ù‡Ù†Ø§!</div></div>
        </div>
      </div>

      <div class="tsec" id="prog-meas">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ“ Ù‚ÙŠØ§Ø³Ø§Øª Ø¬Ø³Ù…Ùƒ</div>
          <div style="font-size:.77rem;color:var(--text-l);margin-bottom:3px">Ø³Ø¬Ù„ÙŠ Ù‚ÙŠØ§Ø³Ø§ØªÙƒ ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹ Ù„ØªØ±Ù‰ Ø§Ù„ÙØ±Ù‚!</div>
          <div class="meas-grid">
            <div class="meas-box"><label>ğŸ“ Ø§Ù„Ø®ØµØ± (Ø³Ù…)</label><input class="meas-input" id="m-waist" type="number" placeholder="Ù…Ø«Ø§Ù„: 70" step="0.5"></div>
            <div class="meas-box"><label>ğŸ“ Ø§Ù„Ø£Ø±Ø¯Ø§Ù (Ø³Ù…)</label><input class="meas-input" id="m-hips" type="number" placeholder="Ù…Ø«Ø§Ù„: 90" step="0.5"></div>
            <div class="meas-box"><label>ğŸ“ Ø§Ù„ÙØ®Ø° Ø§Ù„Ø£ÙŠÙ…Ù† (Ø³Ù…)</label><input class="meas-input" id="m-thighR" type="number" placeholder="Ù…Ø«Ø§Ù„: 55" step="0.5"></div>
            <div class="meas-box"><label>ğŸ“ Ø§Ù„ÙØ®Ø° Ø§Ù„Ø£ÙŠØ³Ø± (Ø³Ù…)</label><input class="meas-input" id="m-thighL" type="number" placeholder="Ù…Ø«Ø§Ù„: 55" step="0.5"></div>
            <div class="meas-box"><label>ğŸ“ Ø§Ù„Ø¨Ø·Ù† (Ø³Ù…)</label><input class="meas-input" id="m-belly" type="number" placeholder="Ù…Ø«Ø§Ù„: 78" step="0.5"></div>
            <div class="meas-box"><label>ğŸ“ Ø§Ù„Ø¹Ø¶Ø¯ (Ø³Ù…)</label><input class="meas-input" id="m-arm" type="number" placeholder="Ù…Ø«Ø§Ù„: 28" step="0.5"></div>
          </div>
          <button class="calc-btn" onclick="saveMeas()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</button>
        </div>
        <div class="card" style="margin-top:0">
          <div class="ct">ğŸ“… Ø³Ø¬Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</div>
          <div id="measHistory"><div style="color:var(--text-l);font-size:.82rem">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙŠØ§Ø³Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯.</div></div>
        </div>
      </div>

      <div class="tsec" id="prog-calc">
        <div class="card" style="margin-top:8px">
          <div class="ct">ğŸ“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</div>
          <div style="font-size:.77rem;color:var(--text-l);margin-bottom:9px">Ø§Ø­Ø³Ø¨ÙŠ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ!</div>
          <div class="calc-row"><span class="calc-label">âš–ï¸ Ø§Ù„ÙˆØ²Ù†</span><input class="calc-input" id="ci-weight" type="number" placeholder="ÙƒØº" value="53" step="0.5"></div>
          <div class="calc-row"><span class="calc-label">ğŸ“ Ø§Ù„Ø·ÙˆÙ„</span><input class="calc-input" id="ci-height" type="number" placeholder="Ø³Ù…" value="154"></div>
          <div class="calc-row"><span class="calc-label">ğŸ‚ Ø§Ù„Ø¹Ù…Ø±</span><input class="calc-input" id="ci-age" type="number" placeholder="Ø³Ù†Ø©"></div>
          <div class="calc-row"><span class="calc-label">ğŸƒ Ø§Ù„Ù†Ø´Ø§Ø·</span>
            <select class="calc-input" id="ci-activity">
              <option value="1.2">Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©</option>
              <option value="1.375" selected>Ø®ÙÙŠÙ (1-3 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹)</option>
              <option value="1.55">Ù…ØªÙˆØ³Ø· (3-5 Ø£ÙŠØ§Ù…)</option>
              <option value="1.725">Ø¹Ø§Ù„ÙŠ (6-7 Ø£ÙŠØ§Ù…)</option>
            </select>
          </div>
          <button class="calc-btn" onclick="calcBMR()">ğŸ”¥ Ø§Ø­Ø³Ø¨ÙŠ Ø§Ù„Ø¢Ù†</button>
          <div class="result-box" id="calcResult">
            <div class="rbrow"><span>BMR (Ø§Ù„Ø­Ø±Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)</span><strong id="r-bmr">-</strong></div>
            <div class="rbrow"><span>TDEE (Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„ÙŠÙˆÙ…ÙŠ)</span><strong id="r-tdee">-</strong></div>
            <div class="rbrow"><span>ğŸ¯ Ù„Ø®Ø³Ø§Ø±Ø© 0.5 ÙƒØº/Ø£Ø³Ø¨ÙˆØ¹</span><strong id="r-lose05" style="color:var(--green)">-</strong></div>
            <div class="rbrow"><span>ğŸ¯ Ù„Ø®Ø³Ø§Ø±Ø© 1 ÙƒØº/Ø£Ø³Ø¨ÙˆØ¹</span><strong id="r-lose1" style="color:var(--gold)">-</strong></div>
            <div class="rbrow"><span>âš ï¸ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø§Ù„Ø¢Ù…Ù†</span><strong style="color:#e74c3c">1200 Ø³Ø¹Ø±Ø©</strong></div>
          </div>
        </div>
        <div class="card" style="margin-top:0">
          <div class="ct">ğŸ“Š Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI)</div>
          <div id="bmiResult" style="padding:10px;background:var(--pink-p);border-radius:11px;color:var(--pink);font-weight:700;text-align:center;font-size:.88rem">Ø£Ø¯Ø®Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ§Ø­Ø³Ø¨ÙŠ!</div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â• LOG â•â•â•â• -->
    <div class="page" id="page-log">
      <div class="card" style="margin-top:8px">
        <div class="ct">ğŸ“… Ø³Ø¬Ù„ Ø£ÙŠØ§Ù…ÙŠ</div>
        <div style="font-size:.79rem;color:var(--text-l)">ÙƒÙ„ ÙŠÙˆÙ… ØªØ­ÙØ¸ÙŠÙ†Ù‡ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ ğŸ’ª</div>
      </div>
      <div id="logList"></div>
      <div style="height:6px"></div>
    </div>

    <!-- â•â•â•â• TIPS â•â•â•â• -->
    <div class="page" id="page-tips">
      <div class="tl" style="margin-top:8px">
        <h3>ğŸ“… ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
        <div class="tli"><div class="tldot">1</div><div class="tltext"><strong>Ø£Ø³Ø¨ÙˆØ¹ 1:</strong> -0.5 ÙƒØº + Ø§Ù†ØªÙØ§Ø® Ø£Ù‚Ù„</div></div>
        <div class="tli"><div class="tldot">2</div><div class="tltext"><strong>Ø£Ø³Ø¨ÙˆØ¹ 2:</strong> -1 ÙƒØº + Ø¬Ø³Ù… Ø£Ø®Ù</div></div>
        <div class="tli"><div class="tldot">3</div><div class="tltext"><strong>Ø£Ø³Ø¨ÙˆØ¹ 3:</strong> -1.5 ÙƒØº + Ù…Ù„Ø§Ø¨Ø³ Ø£ÙˆØ³Ø¹</div></div>
        <div class="tli"><div class="tldot">4</div><div class="tltext"><strong>Ø£Ø³Ø¨ÙˆØ¹ 4:</strong> -2 ÙƒØº + Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­!</div></div>
      </div>
      <div class="tcard pink"><h3>ğŸ”¥ Ù‚Ø¨Ù„ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</h3><ul><li>â€¢ Ø§Ø´Ø±Ø¨ÙŠ ÙƒØ£Ø³ Ù…Ø§ÙŠ</li><li>â€¢ Ø³Ø®Ù†ÙŠ 3-5 Ø¯Ù‚Ø§Ø¦Ù‚</li><li>â€¢ Ù„Ø¨Ø³ÙŠ Ù…Ù„Ø§Ø¨Ø³ Ù…Ø±ÙŠØ­Ø©</li><li>â€¢ Ø´ØºÙ„ÙŠ Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ­ÙØ²Ùƒ!</li></ul></div>
      <div class="tcard green"><h3>âœ¨ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</h3><ul><li>â€¢ ØªÙ…Ø·ÙŠ 5 Ø¯Ù‚Ø§Ø¦Ù‚ (Ù…Ù‡Ù…!)</li><li>â€¢ ÙƒØ£Ø³ Ù…Ø§ÙŠ Ø£Ùˆ Ø¹ØµÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ</li><li>â€¢ Ø§Ø³ØªØ­Ù…Ø§Ù… Ø¯Ø§ÙØ¦</li><li>â€¢ ÙˆØ¬Ø¨Ø© Ø®ÙÙŠÙØ© Ø®Ù„Ø§Ù„ 30 Ø¯Ù‚ÙŠÙ‚Ø©</li></ul></div>
      <div class="tcard gold"><h3>ğŸŒ™ Ù†ØµØ§Ø¦Ø­ Ø±Ù…Ø¶Ø§Ù†</h3><ul><li>â€¢ ØªÙ…Ø±ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„ÙØ·ÙˆØ± Ø¨Ù€ 30 Ø¯Ù‚ÙŠÙ‚Ø©</li><li>â€¢ 2-3 Ù„ØªØ± Ù…Ø§Ø¡ Ø¨ÙŠÙ† Ø§Ù„ÙØ·ÙˆØ± ÙˆØ§Ù„Ø³Ø­ÙˆØ±</li><li>â€¢ Ø³Ø­ÙˆØ± Ø¨Ø±ÙˆØªÙŠÙ† + Ø£Ù„ÙŠØ§Ù = Ø´Ø¨Ø¹ Ø£ÙƒØ«Ø±</li><li>â€¢ ØªØ¬Ù†Ø¨ÙŠ Ø§Ù„Ù…Ù„Ø­ ÙˆØ§Ù„Ø­Ù„ÙˆÙŠØ§Øª Ø¨Ø§Ù„Ø³Ø­ÙˆØ±</li></ul></div>
      <div class="tcard blue"><h3>ğŸ¯ Ù„Ù„ØªØ­ÙÙŠØ²</h3><ul><li>â€¢ ØµÙˆØ±ÙŠ Ù†ÙØ³Ùƒ ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹</li><li>â€¢ Ù‚ÙŠØ³ÙŠ Ø§Ù„Ø®ØµØ± ÙˆØ§Ù„ÙØ®Ø° Ø¨Ø´Ø±ÙŠØ· Ù‚ÙŠØ§Ø³</li><li>â€¢ Ø§Ø­ØªÙÙ„ÙŠ Ø¨ÙƒÙ„ Ø¥Ù†Ø¬Ø§Ø² ØµØºÙŠØ±</li><li>â€¢ Ø´Ø§Ø±ÙƒÙŠ ØµØ¯ÙŠÙ‚Ø© Ù…Ø¹Ùƒ Ø§Ù„Ø±Ø­Ù„Ø©!</li></ul></div>
      <div style="text-align:center;padding:16px;color:var(--pink);font-weight:700;font-size:.98rem">ğŸ’– ØµÙ…Ù…Øª Ø®ØµÙŠØµØ§Ù‹ Ù„Ù€ Aya ğŸ’–<br><span style="font-size:.8rem;color:var(--text-l);font-weight:400">Ø£Ù†ØªÙ Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡! ğŸŒŸ</span></div>
      <div style="height:6px"></div>
    </div>

  </div>

  <!-- BOTTOM NAV â€” SVG ICONS -->
  <nav class="bnav">
    <button class="nb active" onclick="sp('home',this)">
      <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      <span class="nl">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
    </button>
    <button class="nb" onclick="sp('meals',this)">
      <svg viewBox="0 0 24 24"><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg>
      <span class="nl">Ø§Ù„Ø£ÙƒÙ„</span>
    </button>
    <button class="nb" onclick="sp('exercises',this)">
      <svg viewBox="0 0 24 24"><path d="M6.5 6.5h11"/><path d="M6.5 17.5h11"/><path d="M3 9.5h18"/><path d="M3 14.5h18"/><circle cx="6.5" cy="6.5" r="2"/><circle cx="17.5" cy="6.5" r="2"/><circle cx="6.5" cy="17.5" r="2"/><circle cx="17.5" cy="17.5" r="2"/></svg>
      <span class="nl">ØªÙ…Ø§Ø±ÙŠÙ†</span>
    </button>
    <button class="nb" onclick="sp('tracker',this)">
      <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><polyline points="9 16 11 18 15 14"/></svg>
      <span class="nl">ÙŠÙˆÙ…ÙŠ</span>
    </button>
    <button class="nb" onclick="sp('progress',this)">
      <svg viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
      <span class="nl">ØªÙ‚Ø¯Ù…ÙŠ</span>
    </button>
    <button class="nb" onclick="sp('log',this)">
      <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
      <span class="nl">Ø³Ø¬Ù„ÙŠ</span>
    </button>
    <button class="nb" onclick="sp('tips',this)">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      <span class="nl">Ù†ØµØ§Ø¦Ø­</span>
    </button>
  </nav>
</div>

<div id="installBanner" style="display:none;position:fixed;bottom:calc(65px + env(safe-area-inset-bottom,0px) + 10px);left:13px;right:13px;background:linear-gradient(135deg,#1a0a2e,#2d1060);color:#fff;border-radius:16px;padding:13px 15px;z-index:300;box-shadow:0 4px 20px rgba(0,0,0,.3);display:none;align-items:center;gap:12px">
  <span style="font-size:1.4rem">ğŸ“²</span>
  <div style="flex:1">
    <div style="font-weight:700;font-size:.88rem">Ø«Ø¨Ù‘ØªÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!</div>
    <div style="font-size:.73rem;opacity:.8;margin-top:2px">Ø§Ø¶ØºØ·ÙŠ Ù„Ø¥Ø¶Ø§ÙØ© Ù…ÙÙƒØ±Ø© Ø±Ù…Ø¶Ø§Ù† Ù„Ø´Ø§Ø´ØªÙƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
  </div>
  <button id="installBtn" style="background:var(--pink);color:#fff;border:none;border-radius:10px;padding:8px 13px;font-family:'Tajawal',sans-serif;font-size:.82rem;font-weight:700;cursor:pointer;white-space:nowrap">ØªØ«Ø¨ÙŠØª</button>
  <button onclick="document.getElementById('installBanner').style.display='none'" style="background:rgba(255,255,255,.15);color:#fff;border:none;border-radius:8px;padding:8px 10px;cursor:pointer;font-size:.8rem">âœ•</button>
</div>

<script>
let deferredInstallPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredInstallPrompt = e;
  const banner = document.getElementById('installBanner');
  if(banner){ banner.style.display='flex'; }
});
document.addEventListener('DOMContentLoaded', ()=>{
  const btn = document.getElementById('installBtn');
  if(btn){
    btn.addEventListener('click', async () => {
      if(!deferredInstallPrompt) return;
      deferredInstallPrompt.prompt();
      const {outcome} = await deferredInstallPrompt.userChoice;
      if(outcome==='accepted') document.getElementById('installBanner').style.display='none';
      deferredInstallPrompt = null;
    });
  }
});
window.addEventListener('appinstalled', ()=>{
  document.getElementById('installBanner').style.display='none';
  deferredInstallPrompt=null;
  // small toast
  const t=document.getElementById('toast');
  if(t){t.textContent='ğŸ‰ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!';t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);}
});
</script>
<div class="toast" id="toast"></div>

<script>
const QUOTES=['ğŸŒŸ Ø£Ù†ØªÙ Ø£Ù‚ÙˆÙ‰ Ù…Ù…Ø§ ØªØªØ®ÙŠÙ„ÙŠÙ†!','ğŸ’ª ÙƒÙ„ ÙŠÙˆÙ… Ù‡Ùˆ ÙØ±ØµØ© Ø¬Ø¯ÙŠØ¯Ø©!','ğŸ¯ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ù‡ÙŠ Ø§Ù„Ù…ÙØªØ§Ø­!','âœ¨ Ø¬Ø³Ù…Ùƒ ÙŠØ³ØªØ­Ù‚ Ø£ÙØ¶Ù„ Ø±Ø¹Ø§ÙŠØ©!','ğŸ”¥ ÙƒÙ„ ØªÙ…Ø±ÙŠÙ† ÙŠÙ‚Ø±Ø¨ÙƒÙ Ù…Ù† Ù‡Ø¯ÙÙƒ!','ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ø°Ù‡Ø¨ÙŠØ© Ù„Ù„ØªØºÙŠÙŠØ±!','ğŸ’– Ø£Ø­Ø¨ÙŠ Ù†ÙØ³Ùƒ ÙˆØ¬Ø³Ù…Ùƒ!','â­ Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¬Ø§Ø­!'];
const TODAY=new Date().toISOString().split('T')[0];
let S={checks:{workout:false,diet:false,water:false,sleep:false},customTasks:[],customChecks:{},cups:0,weight:'',notes:'',foodLog:[],log:[],measurements:[],weightHistory:[]};

function init(){
  try{const s=localStorage.getItem('r-v4');if(s)S=JSON.parse(s);}catch(e){}
  if(!S.customTasks)S.customTasks=[];
  if(!S.customChecks)S.customChecks={};
  if(!S.measurements)S.measurements=[];
  if(!S.weightHistory)S.weightHistory=[];
  if(!S.foodLog)S.foodLog=[];
  if(localStorage.getItem('r-day')!==TODAY){
    S.checks={workout:false,diet:false,water:false,sleep:false};
    S.customChecks={};S.cups=0;S.weight='';S.notes='';S.foodLog=[];
    localStorage.setItem('r-day',TODAY);save();
  }
  document.getElementById('todayDate').textContent=new Date().toLocaleDateString('ar-SA',{weekday:'long',month:'long',day:'numeric'});
  document.getElementById('mq').textContent=QUOTES[Math.floor(Math.random()*QUOTES.length)];
  ramadanCountdown();renderChecks();renderWater();renderFoodLog();renderLog();renderMeasHistory();renderWeightChart();loadInputs();renderCustomTasks();
}
function save(){localStorage.setItem('r-v4',JSON.stringify(S));}

// NAV
function sp(name,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nb').forEach(b=>b.classList.remove('active'));
  document.getElementById('page-'+name).classList.add('active');
  btn.classList.add('active');
  document.querySelector('.pc').scrollTop=0;
}
function stab(group,name,btn){
  const page=btn.closest('.page');
  page.querySelectorAll('.tsec').forEach(s=>s.classList.remove('active'));
  page.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
  document.getElementById(group+'-'+name).classList.add('active');
  btn.classList.add('active');
}

// COUNTDOWN
function ramadanCountdown(){
  const end=new Date('2026-03-20');
  const diff=Math.ceil((end-new Date())/(864e5));
  document.getElementById('cdNum').textContent=diff>0?diff:'ğŸ‰';
  if(diff<=0){
    document.getElementById('ramadanCountdown').querySelector('.cdtitle').textContent='Ø¹ÙŠØ¯ Ù…Ø¨Ø§Ø±Ùƒ ÙˆÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ Ø¨Ø®ÙŠØ±!';
  }
}

// CHECKS
function tc(key){
  S.checks[key]=!S.checks[key];save();renderChecks();
  if(S.checks[key]){const m={workout:'ğŸ‰ Ø±Ù‡ÙŠØ¨Ø©! Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø®Ù„Ø§Øµ!',diet:'ğŸ¥— Ù…Ù…ØªØ§Ø²!',water:'ğŸ’§ Ø£Ø­Ø³Ù†ØªÙ!',sleep:'ğŸ˜´ Ø§Ù„Ù†ÙˆÙ… ÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ù‚!'};toast(m[key]);}
  checkAllDone();
}
function tcCustom(id){
  S.customChecks[id]=!S.customChecks[id];save();renderCustomTasks();
  if(S.customChecks[id])toast('âœ… Ø£Ø­Ø³Ù†ØªÙ!');
  checkAllDone();
}
function checkAllDone(){
  const fixedDone=Object.values(S.checks).every(v=>v);
  const customDone=S.customTasks.every(t=>S.customChecks[t.id]);
  if(fixedDone&&(S.customTasks.length===0||customDone))setTimeout(()=>toast('ğŸ† Ø±Ù‡ÙŠØ¨Ø©! Ø£ÙƒÙ…Ù„ØªÙ ÙƒÙ„ Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…!'),600);
}
function renderChecks(){
  ['workout','diet','water','sleep'].forEach(k=>{
    ['','2'].forEach(s=>{
      const c=document.getElementById('c-'+k+s);
      if(c){c.classList.toggle('done',S.checks[k]);c.textContent=S.checks[k]?'âœ“':'';}
    });
  });
  const done=Object.values(S.checks).filter(Boolean).length+S.customTasks.filter(t=>S.customChecks[t.id]).length;
  const total=4+S.customTasks.length;
  const hdc=document.getElementById('hdc');if(hdc)hdc.textContent=done+'/'+total;
  const pbf=document.getElementById('pbf');if(pbf)pbf.style.width=(total>0?done/total*100:0)+'%';
}

// CUSTOM TASKS
function addCustomTask(){
  const input=document.getElementById('newTaskInput');
  const txt=input.value.trim();
  if(!txt){toast('âš ï¸ Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©!');return;}
  const id='task_'+Date.now();
  S.customTasks.push({id,label:txt});
  S.customChecks[id]=false;
  input.value='';save();renderCustomTasks();renderChecks();
}
function deleteCustomTask(id){
  S.customTasks=S.customTasks.filter(t=>t.id!==id);
  delete S.customChecks[id];
  save();renderCustomTasks();renderChecks();
}
function renderCustomTasks(){
  const html=S.customTasks.map(t=>`
    <div class="cr" id="crow-${t.id}">
      <div class="cc ${S.customChecks[t.id]?'done':''}" onclick="tcCustom('${t.id}')">${S.customChecks[t.id]?'âœ“':''}</div>
      <span>â­</span>
      <span class="crl" onclick="tcCustom('${t.id}')">${t.label}</span>
      <button class="del-task" onclick="deleteCustomTask('${t.id}')">âœ•</button>
    </div>`).join('');
  ['customTasksHome','customTasksTracker'].forEach(id=>{
    const el=document.getElementById(id);if(el)el.innerHTML=html;
  });
}

// WATER
function renderWater(){
  const g=document.getElementById('wgrid');if(!g)return;
  g.innerHTML='';
  for(let i=0;i<8;i++){
    const c=document.createElement('div');
    c.className='wcup'+(i<S.cups?' filled':'');
    c.innerHTML='<span class="ci">ğŸ’§</span>';
    c.onclick=()=>{S.cups=(i<S.cups)?i:i+1;save();renderWater();updateStats();if(S.cups===8)toast('ğŸ’§ Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„ØªÙ 8 Ø£ÙƒÙˆØ§Ø¨!');};
    g.appendChild(c);
  }
  const wc=document.getElementById('wcnt');if(wc)wc.textContent=S.cups+' / 8 Ø£ÙƒÙˆØ§Ø¨';
  updateStats();
}
function updateStats(){
  const hwc=document.getElementById('hwc');if(hwc)hwc.textContent=S.cups;
  const hw=document.getElementById('hw');if(hw)hw.textContent=S.weight||'-';
}

// â”€â”€â”€ FOOD DATABASE â”€â”€â”€
const FOOD_DB=[
  // Ø¥ÙØ·Ø§Ø±
  {n:'ØªÙ…Ø± (Ø­Ø¨Ø©)',cal:20,unit:'Ø­Ø¨Ø©',cat:'iftar'},
  {n:'ØªÙ…Ø± Ù…Ø¬Ø¯ÙˆÙ„ (Ø­Ø¨Ø©)',cal:25,unit:'Ø­Ø¨Ø©',cat:'iftar'},
  {n:'Ù„Ø¨Ù† (ÙƒØ§Ø³Ø© 200Ù…Ù„)',cal:120,unit:'ÙƒØ§Ø³Ø©',cat:'iftar'},
  {n:'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø¨ÙŠØ¹ÙŠ (ÙƒØ§Ø³Ø©)',cal:110,unit:'ÙƒØ§Ø³Ø©',cat:'iftar'},
  {n:'Ø¹ØµÙŠØ± ØªÙ…Ø± Ù‡Ù†Ø¯ÙŠ (ÙƒØ§Ø³Ø©)',cal:130,unit:'ÙƒØ§Ø³Ø©',cat:'iftar'},
  {n:'Ù‚Ù…Ø± Ø§Ù„Ø¯ÙŠÙ† (ÙƒØ§Ø³Ø©)',cal:140,unit:'ÙƒØ§Ø³Ø©',cat:'iftar'},
  // Ø³Ø­ÙˆØ±
  {n:'Ø´ÙˆÙØ§Ù† Ù…Ø·Ø¨ÙˆØ® (ÙƒØ§Ø³Ø©)',cal:150,unit:'ÙƒØ§Ø³Ø©',cat:'suhoor'},
  {n:'Ø®Ø¨Ø² ØªÙˆØ³Øª (Ø´Ø±ÙŠØ­Ø©)',cal:70,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'suhoor'},
  {n:'Ø¬Ø¨Ù†Ø© Ø¨ÙŠØ¶Ø§Ø¡ (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:30,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'suhoor'},
  {n:'Ø²ÙŠØªÙˆÙ† (5 Ø­Ø¨Ø§Øª)',cal:35,unit:'5 Ø­Ø¨Ø§Øª',cat:'suhoor'},
  {n:'Ù„Ø¨Ù†Ø© (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:40,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'suhoor'},
  {n:'Ù…ÙˆØ² (Ø­Ø¨Ø©)',cal:90,unit:'Ø­Ø¨Ø©',cat:'suhoor'},
  // Ø´ÙˆØ±Ø¨Ø©
  {n:'Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³ (ÙƒØ§Ø³Ø©)',cal:130,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  {n:'Ø´ÙˆØ±Ø¨Ø© Ø®Ø¶Ø§Ø± (ÙƒØ§Ø³Ø©)',cal:80,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  {n:'Ø´ÙˆØ±Ø¨Ø© Ø¯Ø¬Ø§Ø¬ (ÙƒØ§Ø³Ø©)',cal:120,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  {n:'Ø´ÙˆØ±Ø¨Ø© ÙØ±ÙŠÙƒØ© (ÙƒØ§Ø³Ø©)',cal:180,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  {n:'Ø´ÙˆØ±Ø¨Ø© Ø´Ø¹ÙŠØ±ÙŠØ© (ÙƒØ§Ø³Ø©)',cal:150,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  {n:'Ø´ÙˆØ±Ø¨Ø© Ø·Ù…Ø§Ø·Ù… (ÙƒØ§Ø³Ø©)',cal:90,unit:'ÙƒØ§Ø³Ø©',cat:'soup'},
  // Ø±Ø² ÙˆØ­Ø¨ÙˆØ¨
  {n:'Ø±Ø² Ù…Ø·Ø¨ÙˆØ® (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:30,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'rice'},
  {n:'Ø±Ø² Ù…Ø·Ø¨ÙˆØ® (Ø·Ø¨Ù‚ Ù…ØªÙˆØ³Ø·)',cal:200,unit:'Ø·Ø¨Ù‚',cat:'rice'},
  {n:'ÙØ±ÙŠÙƒØ© Ù…Ø·Ø¨ÙˆØ®Ø© (ÙƒØ§Ø³Ø©)',cal:220,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  {n:'Ø¨Ø±ØºÙ„ Ù…Ø·Ø¨ÙˆØ® (ÙƒØ§Ø³Ø©)',cal:150,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  {n:'Ù…ÙƒØ±ÙˆÙ†Ø© Ù…Ø·Ø¨ÙˆØ®Ø© (ÙƒØ§Ø³Ø©)',cal:200,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  {n:'Ø­Ù…Øµ Ù…Ø³Ù„ÙˆÙ‚ (ÙƒØ§Ø³Ø©)',cal:270,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  {n:'Ø¹Ø¯Ø³ Ù…Ø³Ù„ÙˆÙ‚ (ÙƒØ§Ø³Ø©)',cal:230,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  {n:'ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ (ÙƒØ§Ø³Ø©)',cal:190,unit:'ÙƒØ§Ø³Ø©',cat:'rice'},
  // Ù„Ø­ÙˆÙ… ÙˆØ¯Ø¬Ø§Ø¬
  {n:'ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ (Ù†Øµ)',cal:130,unit:'Ù‚Ø·Ø¹Ø©',cat:'meat'},
  {n:'ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ (ÙƒØ§Ù…Ù„)',cal:260,unit:'Ù‚Ø·Ø¹Ø©',cat:'meat'},
  {n:'ÙØ®Ø° Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ',cal:180,unit:'Ù‚Ø·Ø¹Ø©',cat:'meat'},
  {n:'Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙŠ (Ù‚Ø·Ø¹Ø©)',cal:250,unit:'Ù‚Ø·Ø¹Ø©',cat:'meat'},
  {n:'Ù„Ø­Ù… Ø¨Ù‚Ø± Ù…Ø´ÙˆÙŠ (100Øº)',cal:215,unit:'100Øº',cat:'meat'},
  {n:'Ù„Ø­Ù… ØºÙ†Ù… Ù…Ø´ÙˆÙŠ (100Øº)',cal:250,unit:'100Øº',cat:'meat'},
  {n:'Ø³Ù…Ùƒ Ù…Ø´ÙˆÙŠ (100Øº)',cal:150,unit:'100Øº',cat:'meat'},
  {n:'ØªÙˆÙ†Ø© Ø¨Ø§Ù„Ù…Ø§Ø¡ (Ø¹Ù„Ø¨Ø© 170Øº)',cal:130,unit:'Ø¹Ù„Ø¨Ø©',cat:'meat'},
  {n:'Ø¨ÙŠØ¶Ø© Ù…Ø³Ù„ÙˆÙ‚Ø©',cal:78,unit:'Ø­Ø¨Ø©',cat:'meat'},
  {n:'Ø¨ÙŠØ¶Ø© Ù…Ù‚Ù„ÙŠØ©',cal:100,unit:'Ø­Ø¨Ø©',cat:'meat'},
  {n:'ÙƒØ¨Ø¯Ø© Ù…Ø´ÙˆÙŠØ© (100Øº)',cal:175,unit:'100Øº',cat:'meat'},
  // Ø®Ø¨Ø²
  {n:'Ø®Ø¨Ø² Ø¹Ø±Ø¨ÙŠ Ø£Ø¨ÙŠØ¶ (Ø±ØºÙŠÙ ØµØºÙŠØ±)',cal:80,unit:'Ø±ØºÙŠÙ',cat:'bread'},
  {n:'Ø®Ø¨Ø² Ø¹Ø±Ø¨ÙŠ Ø£Ø³Ù…Ø± (Ø±ØºÙŠÙ ØµØºÙŠØ±)',cal:70,unit:'Ø±ØºÙŠÙ',cat:'bread'},
  {n:'Ø®Ø¨Ø² ØªÙ†ÙˆØ± (Ø±ØºÙŠÙ)',cal:120,unit:'Ø±ØºÙŠÙ',cat:'bread'},
  {n:'Ø®Ø¨Ø² ØªÙˆØ³Øª (Ø´Ø±ÙŠØ­Ø©)',cal:70,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'bread'},
  {n:'Ø®Ø¨Ø² Ø¨Ø§Ø¬ÙŠØª (Ø´Ø±ÙŠØ­Ø©)',cal:130,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'bread'},
  // Ø­Ù„ÙˆÙŠØ§Øª
  {n:'Ù‚Ø·Ø§ÙŠÙ (Ø­Ø¨Ø© Ù…Ø¹ Ù‚Ø´Ø·Ø©)',cal:150,unit:'Ø­Ø¨Ø©',cat:'sweets'},
  {n:'Ù‚Ø·Ø§ÙŠÙ (Ø­Ø¨Ø© Ø¨Ø§Ù„Ø¬ÙˆØ²)',cal:130,unit:'Ø­Ø¨Ø©',cat:'sweets'},
  {n:'ÙƒÙ†Ø§ÙØ© (Ù‚Ø·Ø¹Ø© 100Øº)',cal:350,unit:'Ù‚Ø·Ø¹Ø©',cat:'sweets'},
  {n:'Ø¨Ø³Ø¨ÙˆØ³Ø© (Ù‚Ø·Ø¹Ø©)',cal:200,unit:'Ù‚Ø·Ø¹Ø©',cat:'sweets'},
  {n:'Ù„Ù‚ÙŠÙ…Ø§Øª (5 Ø­Ø¨Ø§Øª)',cal:200,unit:'5 Ø­Ø¨Ø§Øª',cat:'sweets'},
  {n:'Ù…Ù‡Ù„Ø¨ÙŠØ© (ÙƒØ§Ø³Ø©)',cal:200,unit:'ÙƒØ§Ø³Ø©',cat:'sweets'},
  {n:'Ø£Ù… Ø¹Ù„ÙŠ (Ø·Ø¨Ù‚)',cal:400,unit:'Ø·Ø¨Ù‚',cat:'sweets'},
  {n:'ØªØ´ÙŠØ² ÙƒÙŠÙƒ (Ø´Ø±ÙŠØ­Ø©)',cal:350,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'sweets'},
  {n:'Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© (Ù„ÙˆØ­ 30Øº)',cal:160,unit:'Ù„ÙˆØ­',cat:'sweets'},
  {n:'Ø­Ù„Ø§ÙˆØ© Ø·Ø­ÙŠÙ†ÙŠØ© (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:90,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'sweets'},
  // Ù…Ø´Ø±ÙˆØ¨Ø§Øª
  {n:'Ù…Ø§Ø¡ (ÙƒØ§Ø³Ø©)',cal:0,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ø´Ø§ÙŠ Ø¨Ø¯ÙˆÙ† Ø³ÙƒØ± (ÙƒØ§Ø³Ø©)',cal:5,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ø´Ø§ÙŠ Ø¨Ø³ÙƒØ± (ÙƒØ§Ø³Ø©)',cal:50,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ù‚Ù‡ÙˆØ© Ø³Ø§Ø¯Ø© (ÙƒØ§Ø³Ø©)',cal:5,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ù‚Ù‡ÙˆØ© Ø¨Ø­Ù„ÙŠØ¨ (ÙƒØ§Ø³Ø©)',cal:80,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ù„Ø¨Ù† (ÙƒØ§Ø³Ø© 200Ù…Ù„)',cal:120,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ù…Ø¹Ù„Ø¨ (ÙƒØ§Ø³Ø©)',cal:120,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  {n:'ÙƒÙˆÙ„Ø§ (Ø¹Ù„Ø¨Ø© 330Ù…Ù„)',cal:140,unit:'Ø¹Ù„Ø¨Ø©',cat:'drinks'},
  {n:'ÙƒÙˆÙ„Ø§ Ø¯Ø§ÙŠØª (Ø¹Ù„Ø¨Ø©)',cal:2,unit:'Ø¹Ù„Ø¨Ø©',cat:'drinks'},
  {n:'Ø¹ØµÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ Ù…Ø´ÙƒÙ„ (ÙƒØ§Ø³Ø©)',cal:120,unit:'ÙƒØ§Ø³Ø©',cat:'drinks'},
  // ÙÙˆØ§ÙƒÙ‡
  {n:'ØªÙØ§Ø­Ø© (Ù…ØªÙˆØ³Ø·Ø©)',cal:80,unit:'Ø­Ø¨Ø©',cat:'fruits'},
  {n:'Ù…ÙˆØ² (Ø­Ø¨Ø© Ù…ØªÙˆØ³Ø·Ø©)',cal:90,unit:'Ø­Ø¨Ø©',cat:'fruits'},
  {n:'Ø¨Ø±ØªÙ‚Ø§Ù„Ø© (Ù…ØªÙˆØ³Ø·Ø©)',cal:60,unit:'Ø­Ø¨Ø©',cat:'fruits'},
  {n:'Ø¹Ù†Ø¨ (ÙƒØ§Ø³Ø©)',cal:110,unit:'ÙƒØ§Ø³Ø©',cat:'fruits'},
  {n:'Ø¨Ø·ÙŠØ® (Ø´Ø±ÙŠØ­Ø©)',cal:85,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'fruits'},
  {n:'ÙØ±Ø§ÙˆÙ„Ø© (ÙƒØ§Ø³Ø©)',cal:50,unit:'ÙƒØ§Ø³Ø©',cat:'fruits'},
  {n:'Ù…Ø§Ù†Ø¬Ùˆ (Ù†Øµ)',cal:100,unit:'Ù†Øµ',cat:'fruits'},
  {n:'Ø®ÙˆØ® (Ø­Ø¨Ø©)',cal:60,unit:'Ø­Ø¨Ø©',cat:'fruits'},
  {n:'ÙƒÙ…Ø«Ø±Ù‰ (Ø­Ø¨Ø©)',cal:100,unit:'Ø­Ø¨Ø©',cat:'fruits'},
  // Ø£Ù„Ø¨Ø§Ù† ÙˆØ¨ÙŠØ¶
  {n:'Ø­Ù„ÙŠØ¨ ÙƒØ§Ù…Ù„ Ø§Ù„Ø¯Ø³Ù… (ÙƒØ§Ø³Ø©)',cal:150,unit:'ÙƒØ§Ø³Ø©',cat:'dairy'},
  {n:'Ø­Ù„ÙŠØ¨ Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø³Ù… (ÙƒØ§Ø³Ø©)',cal:100,unit:'ÙƒØ§Ø³Ø©',cat:'dairy'},
  {n:'Ø²Ø¨Ø§Ø¯ÙŠ Ø·Ø¨ÙŠØ¹ÙŠ (Ø¹Ù„Ø¨Ø© 180Øº)',cal:110,unit:'Ø¹Ù„Ø¨Ø©',cat:'dairy'},
  {n:'Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ (Ø¹Ù„Ø¨Ø©)',cal:150,unit:'Ø¹Ù„Ø¨Ø©',cat:'dairy'},
  {n:'Ø¬Ø¨Ù†Ø© Ø¨ÙŠØ¶Ø§Ø¡ (Ø´Ø±ÙŠØ­Ø©)',cal:60,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'dairy'},
  {n:'Ø¬Ø¨Ù†Ø© Ø´ÙŠØ¯Ø± (Ø´Ø±ÙŠØ­Ø©)',cal:110,unit:'Ø´Ø±ÙŠØ­Ø©',cat:'dairy'},
  {n:'Ù„Ø¨Ù†Ø© (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:40,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'dairy'},
  {n:'Ù‚Ø´Ø·Ø© (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:50,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'dairy'},
  {n:'Ø²Ø¨Ø¯Ø© (Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©)',cal:35,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'dairy'},
  // Ø¥Ø¶Ø§ÙØ§Øª Ø´Ø§Ø¦Ø¹Ø©
  {n:'Ø²ÙŠØª Ø²ÙŠØªÙˆÙ† (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:120,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'iftar'},
  {n:'Ø³Ù…Ù†Ø© (Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©)',cal:45,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'iftar'},
  {n:'Ø³ÙƒØ± (Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©)',cal:16,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'suhoor'},
  {n:'Ø¹Ø³Ù„ (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:60,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'suhoor'},
  {n:'Ø·Ø­ÙŠÙ†Ø© (Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©)',cal:90,unit:'Ù…Ø¹Ù„Ù‚Ø©',cat:'iftar'},
  {n:'ÙØªØ© Ø­Ù…Øµ (Ø·Ø¨Ù‚ Ù…ØªÙˆØ³Ø·)',cal:450,unit:'Ø·Ø¨Ù‚',cat:'iftar'},
  {n:'Ø³Ù„Ø·Ø© Ø®Ø¶Ø§Ø± (Ø·Ø¨Ù‚)',cal:50,unit:'Ø·Ø¨Ù‚',cat:'iftar'},
  {n:'Ø³Ù„Ø·Ø© ÙØªÙˆØ´ (Ø·Ø¨Ù‚)',cal:150,unit:'Ø·Ø¨Ù‚',cat:'iftar'},
  {n:'ØªØ¨ÙˆÙ„Ø© (Ø·Ø¨Ù‚)',cal:130,unit:'Ø·Ø¨Ù‚',cat:'iftar'},
  {n:'Ù…Ø³Ø®Ù† (Ø¯Ø¬Ø§Ø¬+Ø®Ø¨Ø²)',cal:600,unit:'Ø­ØµØ©',cat:'meat'},
  {n:'Ù…Ù†Ø³Ù (Ø·Ø¨Ù‚ Ù…ØªÙˆØ³Ø·)',cal:700,unit:'Ø·Ø¨Ù‚',cat:'meat'},
  {n:'Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ (Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´)',cal:400,unit:'Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´',cat:'meat'},
  {n:'ÙÙ„Ø§ÙÙ„ (3 Ø­Ø¨Ø§Øª)',cal:180,unit:'3 Ø­Ø¨Ø§Øª',cat:'iftar'},
];

let selectedFoodItem=null;

function searchFood(q){
  const box=document.getElementById('foodSuggestions');
  const catList=document.getElementById('catFoodList');
  catList.style.display='none';
  if(!q||q.length<1){box.style.display='none';return;}
  const results=FOOD_DB.filter(f=>f.n.includes(q)).slice(0,10);
  if(!results.length){box.style.display='none';return;}
  box.style.display='block';
  box.innerHTML=results.map((f,i)=>
    `<div class="food-db-item" onclick="selectFood(${FOOD_DB.indexOf(f)})">
      <div class="fdi-name">${f.n}</div>
      <div class="fdi-cal">${f.cal} Ø³Ø¹Ø±Ø© / ${f.unit}</div>
    </div>`
  ).join('');
}

function filterCat(cat){
  document.querySelectorAll('.qcat-btn').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('foodSuggestions').style.display='none';
  const items=FOOD_DB.filter(f=>f.cat===cat);
  const list=document.getElementById('catFoodList');
  list.style.display='block';
  list.innerHTML=items.map(f=>
    `<div class="food-db-item" onclick="selectFood(${FOOD_DB.indexOf(f)})">
      <div class="fdi-name">${f.n}</div>
      <div class="fdi-cal">${f.cal} Ø³Ø¹Ø±Ø© / ${f.unit}</div>
    </div>`
  ).join('');
}

let currentFoodMode='unit';
let currentSpoonType='large'; // large=15ml, small=5ml

// calories per ml for common foods (approximate)
// Used to estimate spoon-based calories when food is measured in units/cups
const CAL_PER_ML={
  // dense foods ~ 2-4 cal/ml, light foods ~0.4-1 cal/ml
  // We use a per-spoon lookup based on food category and name
};

function getCalPerSpoon(food, spoonType){
  // spoonType: large=15ml, small=5ml
  // We estimate cal/spoon from the food's cal per unit
  // First check if the unit is already Ù…Ø¹Ù„Ù‚Ø© (spoon) - use directly
  if(food.unit.includes('Ù…Ø¹Ù„Ù‚Ø©')){
    const isLargeUnit=food.unit.includes('ÙƒØ¨ÙŠØ±Ø©')||!food.unit.includes('ØµØºÙŠØ±Ø©');
    if(spoonType==='large') return isLargeUnit ? food.cal : food.cal*3;
    else return isLargeUnit ? Math.round(food.cal/3) : food.cal;
  }
  // For ÙƒØ§Ø³Ø© (cup ~240ml): 1 large spoon = 15/240 of cup
  if(food.unit.includes('ÙƒØ§Ø³Ø©')){
    const ratio = spoonType==='large' ? 15/240 : 5/240;
    return Math.max(1, Math.round(food.cal * ratio));
  }
  // For Ø·Ø¨Ù‚ (plate ~400ml equiv): 1 large spoon â‰ˆ 15/400
  if(food.unit.includes('Ø·Ø¨Ù‚')){
    const ratio = spoonType==='large' ? 15/400 : 5/400;
    return Math.max(1, Math.round(food.cal * ratio));
  }
  // For Ø­Ø¨Ø© (piece): estimate density by category
  if(food.unit.includes('Ø­Ø¨Ø©')||food.unit.includes('Ù‚Ø·Ø¹Ø©')||food.unit.includes('Ø´Ø±ÙŠØ­Ø©')){
    // Not suitable for spoon measurement - show warning
    return null;
  }
  // For 100Øº: 1 large spoon â‰ˆ 15g
  if(food.unit.includes('100Øº')||food.unit.includes('100 Øº')){
    const ratio = spoonType==='large' ? 0.15 : 0.05;
    return Math.max(1, Math.round(food.cal * ratio));
  }
  // Fallback: assume 200ml unit
  const ratio = spoonType==='large' ? 15/200 : 5/200;
  return Math.max(1, Math.round(food.cal * ratio));
}

function setFoodMode(mode){
  currentFoodMode=mode;
  if(mode==='unit'){
    document.getElementById('modeUnitRow').style.display='flex';
    document.getElementById('modeSpoonsRow').style.display='none';
    document.getElementById('modeUnitBtn').style.background='#7c3aed';
    document.getElementById('modeUnitBtn').style.color='#fff';
    document.getElementById('modeUnitBtn').style.border='none';
    document.getElementById('modeSpoonsBtn').style.background='#f0ebff';
    document.getElementById('modeSpoonsBtn').style.color='#5b21b6';
    document.getElementById('modeSpoonsBtn').style.border='1.5px solid #c9b8ff';
    updateQtyCalc();
  } else {
    document.getElementById('modeUnitRow').style.display='none';
    document.getElementById('modeSpoonsRow').style.display='block';
    document.getElementById('modeSpoonsBtn').style.background='#7c3aed';
    document.getElementById('modeSpoonsBtn').style.color='#fff';
    document.getElementById('modeSpoonsBtn').style.border='none';
    document.getElementById('modeUnitBtn').style.background='#f0ebff';
    document.getElementById('modeUnitBtn').style.color='#5b21b6';
    document.getElementById('modeUnitBtn').style.border='1.5px solid #c9b8ff';
    updateSpoonCalc();
  }
}

function setSpoonType(type, btn){
  currentSpoonType=type;
  document.getElementById('spoonTypeLargeBtn').style.background= type==='large'?'#7c3aed':'#f0ebff';
  document.getElementById('spoonTypeLargeBtn').style.color= type==='large'?'#fff':'#5b21b6';
  document.getElementById('spoonTypeLargeBtn').style.border= type==='large'?'none':'1.5px solid #c9b8ff';
  document.getElementById('spoonTypeSmallBtn').style.background= type==='small'?'#7c3aed':'#f0ebff';
  document.getElementById('spoonTypeSmallBtn').style.color= type==='small'?'#fff':'#5b21b6';
  document.getElementById('spoonTypeSmallBtn').style.border= type==='small'?'none':'1.5px solid #c9b8ff';
  updateSpoonCalc();
}

function updateSpoonCalc(){
  if(!selectedFoodItem) return;
  const qty=parseFloat(document.getElementById('spoonQty').value)||1;
  const calPerSpoon=getCalPerSpoon(selectedFoodItem, currentSpoonType);
  const noteEl=document.getElementById('spoonNote');
  if(calPerSpoon===null){
    document.getElementById('spoonCalcResult').textContent='âš ï¸ ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø¹Ø§Ù„Ù‚';
    noteEl.textContent='Ù‡Ø°Ø§ Ø§Ù„Ø£ÙƒÙ„ ÙŠÙÙ‚Ø§Ø³ Ø¨Ø§Ù„Ø­Ø¨Ø© Ø£Ùˆ Ø§Ù„Ù‚Ø·Ø¹Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©';
    return;
  }
  const total=Math.round(calPerSpoon*qty);
  document.getElementById('spoonCalcResult').textContent=total+' Ø³Ø¹Ø±Ø©';
  const spoonLabel=currentSpoonType==='large'?'Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©':'Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©';
  noteEl.textContent=`ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ ${calPerSpoon} Ø³Ø¹Ø±Ø© Ù„ÙƒÙ„ ${spoonLabel}`;
}

function selectFood(idx){
  selectedFoodItem=FOOD_DB[idx];
  document.getElementById('foodSearchInput').value=selectedFoodItem.n;
  document.getElementById('foodSuggestions').style.display='none';
  document.getElementById('catFoodList').style.display='none';
  document.getElementById('selectedFoodName').textContent=selectedFoodItem.n;
  document.getElementById('selectedFoodBase').textContent=selectedFoodItem.cal+' Ø³Ø¹Ø±Ø© Ù„ÙƒÙ„ '+selectedFoodItem.unit;
  document.getElementById('foodUnit').textContent=selectedFoodItem.unit;
  document.getElementById('foodQty').value=1;
  document.getElementById('qtyCalcResult').textContent=selectedFoodItem.cal+' Ø³Ø¹Ø±Ø©';
  document.getElementById('selectedFoodBox').style.display='block';
  // reset mode
  currentFoodMode='unit';
  setFoodMode('unit');
  document.getElementById('spoonQty').value=1;
  updateSpoonCalc();
}

function updateQtyCalc(){
  if(!selectedFoodItem)return;
  const qty=parseFloat(document.getElementById('foodQty').value)||1;
  const total=Math.round(selectedFoodItem.cal*qty);
  document.getElementById('qtyCalcResult').textContent=total+' Ø³Ø¹Ø±Ø©';
}

function addFoodFromDB(){
  if(!selectedFoodItem)return;
  let totalCal, name;
  if(currentFoodMode==='spoons'){
    const qty=parseFloat(document.getElementById('spoonQty').value)||1;
    const calPerSpoon=getCalPerSpoon(selectedFoodItem, currentSpoonType);
    if(calPerSpoon===null){toast('âš ï¸ Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£ÙƒÙ„!');return;}
    totalCal=Math.round(calPerSpoon*qty);
    const spoonLabel=currentSpoonType==='large'?'Ù…Ø¹Ù„Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©':'Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©';
    name=`${selectedFoodItem.n} (${qty} ${spoonLabel})`;
  } else {
    const qty=parseFloat(document.getElementById('foodQty').value)||1;
    totalCal=Math.round(selectedFoodItem.cal*qty);
    name=qty===1?selectedFoodItem.n:`${selectedFoodItem.n} Ã— ${qty}`;
  }
  S.foodLog.push({name,cal:totalCal});
  save();renderFoodLog();
  document.getElementById('foodSearchInput').value='';
  document.getElementById('selectedFoodBox').style.display='none';
  document.getElementById('catFoodList').style.display='none';
  selectedFoodItem=null;
  toast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ¬Ø¨Ø©!');
}

function removeFood(idx){S.foodLog.splice(idx,1);save();renderFoodLog();}
function renderFoodLog(){
  const list=document.getElementById('foodLogList');if(!list)return;
  if(!S.foodLog.length){list.innerHTML='<div style="color:var(--text-l);font-size:.82rem;text-align:center;padding:10px">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£ÙƒÙ„ Ù…Ø³Ø¬Ù„ Ø¨Ø¹Ø¯ ğŸ½ï¸</div>';}
  else{list.innerHTML=S.foodLog.map((f,i)=>`<div class="food-log-item"><div class="fli-name">${f.isAI?'ğŸ¤– ':''} ${f.name}</div><span class="fli-cal">${f.cal} Ø³Ø¹Ø±Ø©</span><button class="fli-del" onclick="removeFood(${i})">âœ•</button></div>`).join('');}
  const total=S.foodLog.reduce((a,f)=>a+f.cal,0);
  const el=document.getElementById('totalCal');if(el)el.textContent=total;
}

// SAVE DAY
function loadInputs(){
  const ni=document.getElementById('todayNotes');if(ni)ni.value=S.notes||'';
  const wi=document.getElementById('wgtInput');if(wi)wi.value=S.weight||'';
  renderFoodLog();
}
function saveDay(){
  S.notes=document.getElementById('todayNotes')?.value||'';
  S.weight=document.getElementById('wgtInput')?.value||'';
  updateStats();
  if(S.weight){
    const idx=S.weightHistory.findIndex(e=>e.date===TODAY);
    if(idx>=0)S.weightHistory[idx].w=parseFloat(S.weight);
    else S.weightHistory.push({date:TODAY,w:parseFloat(S.weight)});
  }
  const entry={date:TODAY,checks:{...S.checks},customChecks:{...S.customChecks},cups:S.cups,weight:S.weight,notes:S.notes,foodTotal:S.foodLog.reduce((a,f)=>a+f.cal,0),foodCount:S.foodLog.length};
  const idx=S.log.findIndex(e=>e.date===TODAY);
  if(idx>=0)S.log[idx]=entry;else S.log.unshift(entry);
  save();renderLog();renderWeightChart();
  toast('âœ… ØªÙ… Ø­ÙØ¸ ÙŠÙˆÙ…Ùƒ!');
}

// LOG
function renderLog(){
  const list=document.getElementById('logList');if(!list)return;
  if(!S.log||!S.log.length){list.innerHTML='<div class="log-empty"><div class="icon">ğŸ“­</div><p>Ù…Ø§ ÙÙŠ Ø³Ø¬Ù„Ø§Øª Ø¨Ø¹Ø¯.<br>Ø§Ø­ÙØ¸ÙŠ ÙŠÙˆÙ…Ùƒ Ù…Ù† "ÙŠÙˆÙ…ÙŠ"!</p></div>';return;}
  const names={workout:'ğŸ’ª ØªÙ…Ø±ÙŠÙ†',diet:'ğŸ½ï¸ Ø£ÙƒÙ„',water:'ğŸ’§ Ù…Ø§Ø¡',sleep:'ğŸ˜´ Ù†ÙˆÙ…'};
  list.innerHTML=S.log.slice(0,60).map(e=>{
    const d=new Date(e.date).toLocaleDateString('ar-SA',{weekday:'short',month:'short',day:'numeric'});
    const done=Object.values(e.checks||{}).filter(Boolean).length;
    const tags=Object.entries(e.checks||{}).map(([k,v])=>`<span class="lt ${v?'done':'skip'}">${names[k]}</span>`).join('');
    return `<div class="le"><div class="ledb"><span class="led">ğŸ“… ${d}</span><span class="lesp">${done}/4</span></div><div class="lec"><div class="lch">${tags}</div>${e.cups?`<div>ğŸ’§ ${e.cups}/8 Ø£ÙƒÙˆØ§Ø¨</div>`:''} ${e.weight?`<div class="lwt">âš–ï¸ ${e.weight} ÙƒØº</div>`:''} ${e.foodTotal?`<div>ğŸ´ ${e.foodTotal} Ø³Ø¹Ø±Ø© (${e.foodCount} ÙˆØ¬Ø¨Ø§Øª)</div>`:''} ${e.notes?`<div class="lnote">"${e.notes}"</div>`:''}</div></div>`;
  }).join('');
}

// MEASUREMENTS
function saveMeas(){
  const e={date:TODAY,waist:document.getElementById('m-waist').value,hips:document.getElementById('m-hips').value,thighR:document.getElementById('m-thighR').value,thighL:document.getElementById('m-thighL').value,belly:document.getElementById('m-belly').value,arm:document.getElementById('m-arm').value};
  const idx=S.measurements.findIndex(m=>m.date===TODAY);
  if(idx>=0)S.measurements[idx]=e;else S.measurements.unshift(e);
  save();renderMeasHistory();toast('ğŸ“ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª!');
}
function renderMeasHistory(){
  const h=document.getElementById('measHistory');if(!h)return;
  if(!S.measurements.length){h.innerHTML='<div style="color:var(--text-l);font-size:.82rem">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙŠØ§Ø³Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯.</div>';return;}
  h.innerHTML=S.measurements.slice(0,10).map(e=>{
    const d=new Date(e.date).toLocaleDateString('ar-SA',{month:'short',day:'numeric'});
    return `<div class="mh-item"><span class="mh-date">ğŸ“… ${d}</span><div class="mh-vals">${e.waist?`<span class="mh-val">Ø®ØµØ± ${e.waist}Ø³Ù…</span>`:''} ${e.hips?`<span class="mh-val">Ø£Ø±Ø¯Ø§Ù ${e.hips}Ø³Ù…</span>`:''}</div></div>`;
  }).join('');
}

// WEIGHT CHART
function renderWeightChart(){
  const wrap=document.getElementById('weightChartWrap');const ws=document.getElementById('weightSummary');if(!wrap)return;
  if(!S.weightHistory||S.weightHistory.length<2){wrap.innerHTML='<div class="chart-empty">ğŸ“Š Ø³Ø¬Ù„ÙŠ ÙˆØ²Ù†Ùƒ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„ØªØ±Ù‰ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„ØªÙ‚Ø¯Ù…!<br><small>Ù…Ù† ÙŠÙˆÙ…ÙŠ â† Ù…Ù‡Ø§Ù…ÙŠ â† ÙˆØ²Ù† Ø§Ù„ÙŠÙˆÙ…</small></div>';return;}
  const sorted=[...S.weightHistory].sort((a,b)=>a.date.localeCompare(b.date)).slice(-14);
  const weights=sorted.map(e=>e.w);
  const minW=Math.min(...weights)-0.5,maxW=Math.max(...weights)+0.5;
  const W=320,H=150,pad={l:38,r:10,t:15,b:28};
  const cw=W-pad.l-pad.r,ch=H-pad.t-pad.b;
  const xStep=cw/(sorted.length-1||1);
  const yS=v=>pad.t+ch-(v-minW)/(maxW-minW)*ch;
  const pts=sorted.map((e,i)=>`${pad.l+i*xStep},${yS(e.w)}`).join(' ');
  const area=pts+` ${pad.l+(sorted.length-1)*xStep},${pad.t+ch} ${pad.l},${pad.t+ch}`;
  const labels=sorted.map((e,i)=>{const d=new Date(e.date);return `<text x="${pad.l+i*xStep}" y="${H-6}" text-anchor="middle" font-size="9" fill="#7a5a8a">${d.getDate()}/${d.getMonth()+1}</text>`;}).join('');
  const dots=sorted.map((e,i)=>`<circle cx="${pad.l+i*xStep}" cy="${yS(e.w)}" r="4" fill="#E91E8C" stroke="#fff" stroke-width="2"/><text x="${pad.l+i*xStep}" y="${yS(e.w)-8}" text-anchor="middle" font-size="9" fill="#E91E8C" font-weight="bold">${e.w}</text>`).join('');
  wrap.innerHTML=`<svg viewBox="0 0 ${W} ${H}" style="width:100%;height:auto;overflow:visible"><defs><linearGradient id="ag" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#E91E8C" stop-opacity=".2"/><stop offset="100%" stop-color="#E91E8C" stop-opacity="0"/></linearGradient></defs><polygon points="${area}" fill="url(#ag)"/><polyline points="${pts}" fill="none" stroke="#E91E8C" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/>${dots}${labels}</svg>`;
  if(ws&&sorted.length>=2){const f=sorted[0].w,l=sorted[sorted.length-1].w,d=(l-f).toFixed(1);ws.innerHTML=`<div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border)"><span>Ø£ÙˆÙ„ ÙˆØ²Ù†</span><strong>${f} ÙƒØº</strong></div><div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border)"><span>Ø¢Ø®Ø± ÙˆØ²Ù†</span><strong>${l} ÙƒØº</strong></div><div style="display:flex;justify-content:space-between;padding:6px 0"><span>Ø§Ù„ØªØºÙŠÙŠØ±</span><strong style="color:${d<0?'var(--green)':'#e74c3c'}">${d<0?'ğŸ‰ -'+Math.abs(d)+' ÙƒØº!':'+'+ d+' ÙƒØº'}</strong></div>`;}
}

// BMR CALC
function calcBMR(){
  const w=parseFloat(document.getElementById('ci-weight').value);
  const h=parseFloat(document.getElementById('ci-height').value);
  const a=parseFloat(document.getElementById('ci-age').value);
  const act=parseFloat(document.getElementById('ci-activity').value);
  if(!w||!h||!a){toast('âš ï¸ Ø£Ø¯Ø®Ù„ÙŠ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!');return;}
  const bmr=Math.round(10*w+6.25*h-5*a-161);
  const tdee=Math.round(bmr*act);
  document.getElementById('r-bmr').textContent=bmr+' Ø³Ø¹Ø±Ø©';
  document.getElementById('r-tdee').textContent=tdee+' Ø³Ø¹Ø±Ø©';
  document.getElementById('r-lose05').textContent=Math.max(1200,tdee-500)+' Ø³Ø¹Ø±Ø©';
  document.getElementById('r-lose1').textContent=Math.max(1200,tdee-1000)+' Ø³Ø¹Ø±Ø©';
  document.getElementById('calcResult').classList.add('show');
  const bmi=(w/((h/100)**2)).toFixed(1);
  let lbl=bmi<18.5?'Ù†Ø­ÙŠÙ Ø¬Ø¯Ø§Ù‹ âš ï¸':bmi<25?'Ù…Ø«Ø§Ù„ÙŠ âœ…':bmi<30?'Ø²ÙŠØ§Ø¯Ø© ÙˆØ²Ù† ğŸ“‰':'Ø³Ù…Ù†Ø© âš ï¸';
  document.getElementById('bmiResult').textContent=`BMI = ${bmi} â€” ${lbl}`;
  toast('âœ… ØªÙ… Ø§Ù„Ø­Ø³Ø§Ø¨!');
}

function tex(card){card.classList.toggle('open');}

function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2600);}

// â”€â”€ Inline Service Worker via blob URL for full offline support â”€â”€
if('serviceWorker' in navigator){
  const swCode = `
const CACHE = 'aya-ramadan-v1';
// Cache everything on install
self.addEventListener('install', e => {
  self.skipWaiting();
});
self.addEventListener('activate', e => {
  e.waitUntil(clients.claim());
});
// Cache-first strategy: serve from cache, fallback to network, cache new responses
self.addEventListener('fetch', e => {
  e.respondWith(
    caches.match(e.request).then(cached => {
      if(cached) return cached;
      return fetch(e.request).then(response => {
        if(!response || response.status !== 200) return response;
        const clone = response.clone();
        caches.open(CACHE).then(cache => cache.put(e.request, clone));
        return response;
      }).catch(() => cached || new Response('Offline', {status: 503}));
    })
  );
});
`;
  const swBlob = new Blob([swCode], {type:'text/javascript'});
  const swURL = URL.createObjectURL(swBlob);
  navigator.serviceWorker.register(swURL).then(reg => {
    console.log('SW registered âœ…');
  }).catch(err => {
    // Blob SW may fail in some browsers (Firefox) - silent fallback
    console.log('SW blob failed, trying alternative...');
  });
}

init();

</script>
</body>
</html>
